<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Jacky and MSC]]></title>
  <link href="http://jackycode.github.io/atom.xml" rel="self"/>
  <link href="http://jackycode.github.io/"/>
  <updated>2014-03-30T20:45:27+08:00</updated>
  <id>http://jackycode.github.io/</id>
  <author>
    <name><![CDATA[Jacky Code]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[数据科学之机器学习2：线性回归]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/30/machine-learning1/"/>
    <updated>2014-03-30T19:02:30+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/30/machine-learning1</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical16.jpg" alt="artical 16" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<h4 id="section">一、回归分析</h4>

<hr />

<p>在统计分析中，最大的两支应该算是相关分析和回归分析。而回归分析应该是统计学的核心。回归分析，就是研究因变量$y$与自变量$x$之间的关系，存在条件数学期望：$f(x)=E(y|x)$。此时有：$y=f(x)+\varepsilon$，一般假设$\varepsilon \sim N(0,\sigma^2)$。</p>

<p>回归分析有很多变种：简单线性回归；多项式回归；Logistic回归；非参数回归；非线性回归等等。本篇就介绍最简单的线性回归，首先来看看一元线性回归。</p>

<hr />

<h4 id="section-1">二、一元线性回归</h4>

<hr />

<p>对于一元线性回归来说，$f(x)$就是线性的，则有：$f(x)=E(y|x)=\beta_0 + \beta_1 x$。通过已知的数据，可以估计出$\beta_0,\beta_1$的估计值：$\hat{\beta}_0,\hat{\beta}_1$。那么就有$y$的预测值：$\hat{y} = \hat{\beta}_0 + \hat{\beta}_1 x$。</p>

<hr />

<h5 id="beta0beta1hatbeta0hatbeta1">1. 如何计算$\beta_0,\beta_1$的估计值$\hat{\beta}_0,\hat{\beta}_1$呢？</h5>

<hr />

<p>定义离差平方和：</p>

<script type="math/tex; mode=display">Q(\beta_0,\beta_1) = \sum_{i=1}^{n}(y_i-f(x_i))^2</script>

<p>显然，我们希望$f(x_i)$的值与真实值$y_i$越接近越好。那么就是需要离差平方和越小越好。则得到目标：</p>

<script type="math/tex; mode=display"> \min_{\beta_0,\beta_1}{\sum_{i=1}^{n}(y_i-f(x_i))^2} </script>

<p>如何寻找$\hat{\beta}_0,\hat{\beta}_1$使得上面方程达到最小呢？这个就需要对其对$\hat{\beta}_0,\hat{\beta}_1$求偏导，得到：</p>

<script type="math/tex; mode=display">\frac{\partial Q}{\partial \beta_0}=-2\sum_{i=1}^{n}{(y_i-\beta_0-\beta_1x_i)}</script>

<script type="math/tex; mode=display">\frac{\partial Q}{\partial \beta_1}=-2\sum_{i=1}^{n}{(y_i-\beta_0-\beta_1x_i)x_i}</script>

<p>令上述两式都等于0，计算得到：</p>

<script type="math/tex; mode=display">\hat{\beta}_0=\overline{y}-\hat{\beta}_1\overline{x}</script>

<script type="math/tex; mode=display">\hat{\beta}_1=\frac{\sum_{i=1}^{n}{(x_i-\overline{x})(y_i-\overline{x})}}{\sum_{i=1}^{n}{(x-\overline{x})^2}}</script>

<p>这样就得到$\beta_0,\beta_1$的估计值$\hat{\beta}_0,\hat{\beta}_1$。这个方法就叫做OLS，即普通最小二乘(ordinary least squares)。</p>

<hr />

<h5 id="r">2. R语言实现</h5>

<hr />

<p>在R语言中有自带的函数可以处理线性回归，那就是<code>lm</code>函数。这里使用自带的数据<code>cars</code>做演示：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> attach<span class="p">(</span>cars<span class="p">)</span> <span class="c1"># 使用数据集cars，与with函数类似</span>
</span><span class="line"><span class="o">&gt;</span> lingre <span class="o">&lt;-</span> lm<span class="p">(</span>dist <span class="o">~</span> speed<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> summary<span class="p">(</span>lingre<span class="p">)</span>
</span><span class="line">
</span><span class="line">Call<span class="o">:</span>
</span><span class="line">lm<span class="p">(</span>formula <span class="o">=</span> dist <span class="o">~</span> speed<span class="p">)</span>
</span><span class="line">
</span><span class="line">Residuals<span class="o">:</span>
</span><span class="line">    Min      <span class="m">1</span>Q  Median      <span class="m">3</span>Q     Max
</span><span class="line"><span class="m">-29.069</span>  <span class="m">-9.525</span>  <span class="m">-2.272</span>   <span class="m">9.215</span>  <span class="m">43.201</span>
</span><span class="line">
</span><span class="line">Coefficients<span class="o">:</span>
</span><span class="line">            Estimate Std. Error t value Pr<span class="p">(</span><span class="o">&gt;|</span>t<span class="o">|</span><span class="p">)</span>
</span><span class="line"><span class="p">(</span>Intercept<span class="p">)</span> <span class="m">-17.5791</span>     <span class="m">6.7584</span>  <span class="m">-2.601</span>   <span class="m">0.0123</span> <span class="o">*</span>
</span><span class="line">speed         <span class="m">3.9324</span>     <span class="m">0.4155</span>   <span class="m">9.464</span> <span class="m">1.49e-12</span> <span class="o">***</span>
</span><span class="line"><span class="o">---</span>
</span><span class="line">Signif. codes<span class="o">:</span>  <span class="m">0</span> ‘<span class="o">***</span>’ <span class="m">0.001</span> ‘<span class="o">**</span>’ <span class="m">0.01</span> ‘<span class="o">*</span>’ <span class="m">0.05</span> ‘.’ <span class="m">0.1</span> ‘ ’ <span class="m">1</span>
</span><span class="line">
</span><span class="line">Residual standard error<span class="o">:</span> <span class="m">15.38</span> on <span class="m">48</span> degrees of freedom
</span><span class="line">Multiple R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.6511</span><span class="p">,</span>	Adjusted R<span class="o">-</span>squared<span class="o">:</span>  <span class="m">0.6438</span>
</span><span class="line"><span class="k-Variable">F</span><span class="o">-</span>statistic<span class="o">:</span> <span class="m">89.57</span> on <span class="m">1</span> and <span class="m">48</span> DF<span class="p">,</span>  p<span class="o">-</span>value<span class="o">:</span> <span class="m">1.49e-12</span>
</span><span class="line">
</span><span class="line"><span class="o">&gt;</span> plot<span class="p">(</span>dist <span class="o">~</span> speed<span class="p">,</span> pch<span class="o">=</span><span class="m">4</span><span class="p">)</span> <span class="c1"># 画出散点图</span>
</span><span class="line"><span class="o">&gt;</span> abline<span class="p">(</span>lingre<span class="p">,</span> col<span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">)</span> <span class="c1"># 添加拟合直线</span>
</span><span class="line"><span class="o">&gt;</span> detach<span class="p">(</span>cars<span class="p">)</span> <span class="c1"># 使用完记得释放</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>从这里可以得到回归方程：$\hat{dist} = -17.5791 + 3.9324 \times speed$。（对于其它的结果是什么意思，可以去查看线性回归的相关书籍）</p>

<p>另外，得到拟合直线的图像：</p>

<p><img src="\images\a16\lingre_one.jpg" alt="lingre_one" /></p>

<hr />

<h4 id="section-2">三、多元线性回归</h4>

<hr />

<p>对于多元线性回归来说，其计算方式与一元线性回归类似，区别在于，多元的时候需要利用矩阵来处理。首先看一下回归模型：</p>

<script type="math/tex; mode=display"> y = \beta_0 + \beta_1 x_1 + \beta_2 x_2 + \dots + \beta_p x_p + \varepsilon </script>

<p>其中$p$代表自变量的个数。</p>

<p>若取$x^T_0=[1, 1, \dots, 1]_{1 \times n}$，则可将上述模型改写成：<script type="math/tex">y=X\beta+\varepsilon</script>。其中：</p>

<script type="math/tex; mode=display">y^T=[y_1,y_2,\dots,y_n], X=[x_0,x_1,\dots,x_p], \beta^T=[\beta_0,\beta_1,\dots,\beta_p], \varepsilon^T=[\varepsilon_1,\varepsilon_2,\dots,\varepsilon_n]</script>

<p>其中<script type="math/tex">x^T_i=[x_{1i},x_{2i},\dots,x_{ni}]</script>。</p>

<p>这样我们就可以将离差平方和<script type="math/tex">\sum_{i=1}^{n}{(y_i-\beta_0 + \beta_1 x_1 + \beta_2 x_2 + \dots + \beta_p x_p)^2}</script>写成矩阵形式：</p>

<script type="math/tex; mode=display">(y-X\beta)^T(y-X\beta)</script>

<p>求导可得：<script type="math/tex">-2X^T(y-X\beta)</script>(这里用到矩阵求导的知识，一般介绍<strong>线性模型</strong>的书籍中会讲到；当然也可以直接对上面不是矩阵形式的离差平和求导)。令其等于0，可得：</p>

<script type="math/tex; mode=display">\hat{\beta} = (X^TX)^{-1}X^Ty</script>

<hr />

<h5 id="r-1">R语言实现</h5>

<hr />

<p>对于R语言的实现，依旧使用<code>lm</code>函数：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">lingre_mul <span class="o">&lt;-</span> lm<span class="p">(</span>y <span class="o">~</span> x1 <span class="o">+</span> x2<span class="p">,</span> data<span class="o">=</span>datasets<span class="p">)</span>
</span><span class="line">summary<span class="p">(</span>lingre_mul<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这里就不再用实际数据去演示了。</p>

<hr />

<h4 id="section-3">四、最后</h4>

<hr />

<p>至此，就把线性回归的基础内容介绍完了。但其实线性回归还存在很多其它的问题。比如说回归诊断（就是检查回归的效果），变量选择等等等等。感兴趣的话，可以找本讲线性回归的书看看，有很多！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[数据科学之机器学习1：简介]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/30/data-science-an-introduction-to-machine-learning/"/>
    <updated>2014-03-30T16:39:09+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/30/data-science-an-introduction-to-machine-learning</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical15.jpg" alt="artical 15" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>上一篇“<a href="http://jackycode.github.io/blog/2014/03/27/an-introduction-to-data-science/">数据科学简介</a>”简单地说了一下数据科学是什么，以及它包罗的东西。这一篇打算简单介绍一下<strong>机器学习</strong>，并理一理机器学习中涉及的内容。</p>

<hr />

<h4 id="section">机器学习的定义</h4>

<hr />

<p>一般来说，教科书介绍一样东西，首先会给它下一个确切的定义。不过，对于机器学习的定义，我还真不知道该怎么去下。有太多的版本，太多的述说方式，不知道用哪个好。这里就列举一些我觉得有代表性的，讲的容易懂的那些定义。对于机器学习是什么，看看这些定义，应该就能够有个大致的了解了。</p>

<p>首先，在“<a href="http://www.amazon.cn/Machine-Learning-The-Art-and-Science-of-Algorithms-That-Make-Sense-of-Data-Flach-Peter/dp/1107422221/ref=tmm_pap_title_0">Machine Learning: the art and science of algorithms that make sense of data</a>”一书中，有这样一个定义：</p>

<blockquote>
  <p>Machine Learning is the systematic study of algorithms and systems that improve their knowledge or performance with experience.</p>
</blockquote>

<p>这个定义说的比较简单直白，就是说，机器学习就是研究如何通过经验(其实就是数据)去改进性能的算法(这个翻译学得不好，见谅！)。我们可以简单这样理解，机器学习就是研究这么一类算法，通过这类算法呢，系统可以从数据中获取信息来提升自己的性能。最简单的说法就是将数据转换成有用的信息。</p>

<p>在“<a href="http://www.amazon.cn/Machine-Learning-The-Art-and-Science-of-Algorithms-That-Make-Sense-of-Data-Flach-Peter/dp/1107422221/ref=tmm_pap_title_0">Machine Learning: the art and science of algorithms that make sense of data</a>”书中，还有这么一句话，将机器学习的流程说的很清楚：</p>

<blockquote>
  <p>Machine learning is concerned with using the right features to build the right models that achieve the right task.</p>
</blockquote>

<p>这句话就是说，机器学习关心的就是：如何通过对特征(数据)建立模型去完成一些任务。在Andrew Ng的机器学习视频中，还列出了Tom Mitchell给出的定义，与上面的说法有些相近：</p>

<blockquote>
  <p>A computer program is said to learn from experience E with respect to some task T and some performance measure P, if its performance on T, as measured by P, improves with experience E.</p>
</blockquote>

<p><strong><em>上一篇博文里曾说，数据科学是统计、计算机科学以及专业知识的结合。而其实，机器学习就是统计与计算机科学的结合。正因如此，机器学习是数据科学的核心。</em></strong>简单来说，机器学习就是：研究让机器通过学习过去的经验，达到提高处理相同任务能力的算法。</p>

<hr />

<h4 id="section-1">机器学习的类别</h4>

<hr />

<p>机器学习大致可以分为两类：监督学习(supervised learning)和无监督学习(unsupervised learning)。</p>

<p>如何区分呢？<strong>区别就在于，测试数据有没有给出确切的类别或者结果。若给出了就是监督学习，若没有则是无监督学习</strong>。</p>

<p>比如说回归：其给定的测试样本中，一组自变量的值肯定对应一个确定的因变量的值；再说分类：对于给出的测试样本中的每一个数据，其都会有自己所属的类别。所以回归与分类就属于监督学习的范畴，也就是可以通过既定的数据去做预测。</p>

<p>而无监督学习不同，其给出的数据不存在任何其它信息，比方说聚类，给你一批数据，没有任何信息，让你把数据分成几个类别。一般来说，这时候就需要计算数据之间的相似度(距离)，然后把距离近的归位一类。</p>

<hr />

<h4 id="section-2">最后</h4>

<hr />

<p>到这里，基本上来说，机器学习是干什么的应该有了一些了解了。至于机器学习的分类，监督学习和无监督学习还不明白也不要紧。等弄明白了回归，分类以及聚类等等的是干什么的，自然就明白这两者之间的区别了。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[数据科学简介]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/27/an-introduction-to-data-science/"/>
    <updated>2014-03-27T14:39:21+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/27/an-introduction-to-data-science</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical14.jpg" alt="artical 14" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>对于这两年渐渐兴起的大数据，云计算之类的技术，相信没有人会陌生。即便不知道这个东西是什么，但也是应该听得耳朵起茧子了。归结原因呢，出现这些技术实在是因为现在的数据越来越多，以前的很多数据分析技术越来越不合适。即便是简单的最小二乘线性回归，直接放到大数据上用，跑起来也是够累的。这时候，各种处理大数据的技术就纷纷崛起了，和之前的云计算相同的就是，大数据也改变了计算机原本的使用方式。</p>

<p>OK，说说数据科学吧。数据科学，Data Science，这个玩意儿最早有一本书，叫做“What is Data Science”，O’Reilly出版的（不得不说其出版了太多太牛太厉害的书籍材料，牛得不需要解释）。数据科学就像是一个综合体，包罗的东西非常多，大致有三个方面。</p>

<h5 id="section">第一，概率统计（数学）</h5>
<p>这个提供了大数据的很多理论基础。大数据的处理技术，需要用到非常之多的概率统计学知识。而要想学好概率统计，那你数学得先学学好才行。简单罗列一下：概率论基础，统计学基础，高等概率论，测度论，高等参数统计，随机过程等等等等。这些内容都是理论基础，要是理论学的不咋样，估计折腾大数据也就是玩玩工具，弄点儿结果出来。话说，如果真没学好理论，能不能把结果解释清楚还需要质疑，更何况自己去设计改进一个技术算法呢。</p>

<p>嗯，说到这，回过头去看看泛函分析吧~</p>

<h5 id="section-1">第二，计算机科学</h5>
<p>这个就提供了大数据处理的工具平台了。那么多的数据，你就是理论学得再牛，没有计算机，你自己手算试试！你说你要处理数据，OK，计算机提供了工具平台，那么你就得学习如何运用这些系统环境吧，那么就得学习<strong>分布式计算机系统环境</strong>，这个主流的有：Hadoop(鼎鼎大名吧); Spark(也听说过吧); Cassandra等等。</p>

<p>好了，环境搞明白了，下面你就得发号施令，让计算机去处理数据了。计算可不是人类，你可以跟他讲普通话，讲英文让他帮你干活。你要想它听你的，你得先学会点它能懂的、能听明白的话。OK，编程语言就降临了。一般来说，用于数据处理的语言有R，Python，Octave（与Matlab类似，只是这个开源免费），Matlab等等。为了使用各个平台，说不得你也得学点Java，C，C++。</p>

<p>写到这边，估计已经头大了，这么多东西，这数据科学是不是恐怖了点，谁能受得了啊！！！是的，包含的东西的确多了点，但是学习起来还是很好玩的，我保证(当然，前提你得跟我一样，看见数学不会头晕)！</p>

<p>当然除了上面提到的，数据科学包含的计算机知识还有很多，像数据结构啊，数据库啊，Mahout这样的架构啊等等。</p>

<h5 id="section-2">第三，专业</h5>
<p>这个也就是应用啦。练就了一身绝世内功（理论基础），找到了一把趁手的绝世神兵（计算机科学），现在需要决定的就是出山之后是想做个武林盟主呢，还是独创一个门派，也就是想把这些东西用到哪些地方去。像生物学，跟统计一结合就成了生物统计，要是再加上点计算机科学，那就成了生物学数据科学。OK，这么说应该是很明白的了。</p>

<hr />

<p>数据科学家Drew Conway绘制过一幅图，很好地描述了我上面所说的东西：</p>

<p><img src="http://jackycode.github.io/images/a14/drew-conway-data-science-venn-diagram.jpg" alt="Venn diagram" /></p>

<p>前几天图灵上出了一本书，叫做“<a href="http://www.ituring.com.cn/book/1268">Software Design 中文版 01</a>”。里面介绍了数据科学的很多基础内容，也给出了很多的学习材料，大部分都是网上的视频教程。此外书中还介绍了一些如何使用Excel，R以及Mahout这些工具的基础知识，有兴趣倒是可以入手一本，作为学习数据科学的开始。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[找回曾经的Kindle]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/24/kindle/"/>
    <updated>2014-03-24T14:15:27+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/24/kindle</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical13.jpg" alt="artical 13" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<h4 id="ipadkindle">iPad与Kindle</h4>
<hr />

<p>自从买了iPad之后，看书大都就在iPad上进行了。但是最近觉得吧，iPad看时间长点，眼睛会吃不消，所以今天早上就把我抽屉里的Kindle又拿了出来，倒腾了一下。以后还是拿这家伙看书吧，对眼睛来说，这个还是要好点的。</p>

<p>看惯了iPad那炫丽的屏幕，一下看Kindle觉得挺柔和、舒服以及不适应的。只是，好久没动Kindle，里面的东西着实乱了一点。无从下手，不知该如何收拾，所以就直接先卸载了多看系统，然后将Kindle恢复出厂设置了(好狠啊有木有)。重启之后，登录，然后将自己买的一些电子书推送进去，最终干净整齐在我控制之下的Kindle又回来：</p>

<p><img src="http://jackycode.github.io/images/a13/kindle.jpg" alt="kindle" /></p>

<p>说实话，Kindle看书的效果的确没有iPad爽。iPad那叫一个炫丽精致啊！！！不过，那个长时间看也太伤眼睛了一点。这次就决定，以后除了那些注重图片啊之类的书籍杂志，大部分的电子书还是用Kindle看比较好。</p>

<h4 id="kindle">多看与Kindle</h4>
<hr />

<p>这次卸载了多看系统就没打算再装，因为觉得现在Kindle对中文书籍的支持也蛮好的，没必要搞个多看系统了。更何况，<code>iduokan</code>推送服务有限制，好像超过20M就不行了。</p>

<p>只是多看里面有不少的书籍，不安装多看系统，在Kindle上有些是看不了了(除了图灵出的“码农”可以推送到Kindle)。不过想了一想，觉得也没什么。我大部分在多看上下载的书籍都是免费的，iPhone上看看就好了(个人觉得，iPhone上的多看阅读器体验最好)。那些买了觉得很好的书，我大都也买了纸质的，像<a href="http://macshuo.com/">Mac君</a>的<a href="http://www.amazon.cn/dp/B00ID5UV30">‘MacTalk：人生元编程’</a>等等。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Koding：免费VPS服务的初体验]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/21/kodingrecommended/"/>
    <updated>2014-03-21T16:01:44+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/21/kodingrecommended</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical12.jpg" alt="aritical 12" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>昨天晚上在浏览“<a href="http://ztl2004.github.io/MachineLearningWeekly/">机器学习周刊</a>”时，看到了一个提供免费vps服务的网站，免费的虚拟主机平台哎。那么在上面码代码呀干点什么的，不知道效果如何呢？所有抱着尝试的心态就去看了一看。</p>

<h3 id="section">一见惊喜</h3>

<hr />

<p><img src="http://jackycode.github.io/images/a12/1.jpg" alt="a12_1" /></p>

<p>看到这样的网页，顿时觉得~哇。。。高大上有木有。网页做的这么能吸引我的眼球，已经成功了一半了(对于勾引我的使用来说)。然后就开始注册吧，<a href="https://koding.com/R/jackycode">注册地址</a>。使用我给的注册地址，你跟我都会额外获得1G的空间。输好邮箱跟用户名之后，点击<code>Sign up</code>。很快就会收到一封邮件，点击其中的链接，然后设置自己的密码即可(<strong>注意，这个密码将会是你虚拟主机里终端的密码。</strong>)。</p>

<h3 id="section-1">外表</h3>

<hr />

<p>注册登录之后，大致是这个样子的，看起来还是蛮不错的！</p>

<p><img src="http://jackycode.github.io/images/a12/2.jpg" alt="a12_2" /></p>

<p>顶栏的buttons对应的功能分别是：Activity; Teamwork; Terminal; Ace(默认自带的编辑器); Apps(应用中心，现在应用不多，正在从旧版往新版里面转); DevTools(搞个Koding App？); Julia; Bracket。最后两个默认是没有的，是我自己安装的。</p>

<p>第一印象来说，界面比较干净清洁；功能划分也比较清楚。</p>

<h3 id="section-2">玩一下</h3>

<hr />

<p>外表过关了，那么接下来就看看玩起来到底给不给力。话说，Koding官方的介绍文档里面说，支持的功能很多，挑几个试试呗！(在顶栏上面有个<code>?</code>，可以点击查看帮助)</p>

<p>点击进入终端，界面看起来还不错哦：</p>

<p><img src="http://jackycode.github.io/images/a12/3.jpg" alt="a12_3" /></p>

<p>尝试输入一下这些命令：</p>

<p><img src="http://jackycode.github.io/images/a12/4.jpg" alt="a12_4" /></p>

<p>好吧，自带么有R语言。没关系，这不是基于Ubuntu系统的嘛，我自己装一个还不行~</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sourcesbackup.list
</span><span class="line">sudo vim /etc/apt/sources.list</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>然后在sources.list里面添加<code>deb http://cran.stat.ucla.edu/bin/linux/ubuntu quantal/</code>(建议使用国外的镜像，国内的龟速啊！！！)。OK，保存退出vim。输入命令：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line">sudo apt-get update
</span><span class="line">sudo apt-get install r-base
</span><span class="line">sudo apt-get install r-base-dev</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>最后再看看：</p>

<p><img src="http://jackycode.github.io/images/a12/5.jpg" alt="a12_5" /></p>

<p>OK了嘛！总算是有了，以后跑点什么烦躁的程序就可以放这了，^_^</p>

<p>玩到现在，就发现这个命令行很疼啊，bash啊~能不能换成zsh啊~试了一下，失败鸟~~算了，这就不错了，我还能要求啥呢！先这么着吧。</p>

<h3 id="section-3">其它</h3>
<hr />
<p>看了一下，Koding也是支持Octopress的，而且配置很简单，跟在自己机器上差不多。具体还有什么，就靠自己去慢慢摸索了。可以肯定的是，这个平台还是很不错的，值得推荐哦！</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[记录：最近对博客的一些修改]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/18/record3/"/>
    <updated>2014-03-18T18:52:12+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/18/record3</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical11.jpg" alt="aritical 11" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>前两天发现了一款很不错的主题<code>bootstrap</code>，心中一直很是惦记，终于还是在昨天晚上换了主题。趁着换主题的时间，我也顺便为我的博客添加了一些其它的功能，也设置了一下侧边栏，详情如下。</p>

<h4 id="google-analytics">1. 加入Google Analytics</h4>
<p>对于自己的博客，总是想了解它的现状的。起码我希望知道我的博客有没人来看，所以加了这个功能。</p>

<p>加入这个功能的方法很简单，就是去<a href="http://www.google.com/analytics/">Google Analytics</a>注册个帐号，然后把你的帐号填到<code>_config.yml</code>中对应的位置就OK啦。</p>

<p>当然我就遇到了一个问题，就是填入帐号之后，Google Analytics总是跟踪不到。最后我只能把<code>_config.yml</code>中的帐号注释掉，然后进入<code>source/_includes/head.html</code>中，添加了申请帐号之后给出的脚本。等了大概几分钟，Google Analytics就显示跟踪到了。如果你遇到类似的问题，可以试一下这个方法。</p>

<h4 id="section">2. 加入数学公式支持</h4>

<p>首先启用MathJax，即在<code>source/_includes/custom/footer.html</code>的第一行添加代码：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="javascript"><span class="line"><span class="c">&lt;!--</span> <span class="nx">mathjax</span> <span class="nx">config</span> <span class="nx">similar</span> <span class="nx">to</span> <span class="nx">math</span><span class="p">.</span><span class="nx">stackexchange</span> <span class="o">--&gt;</span>
</span><span class="line"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/x-mathjax-config&quot;</span><span class="o">&gt;</span>
</span><span class="line">  <span class="nx">MathJax</span><span class="p">.</span><span class="nx">Hub</span><span class="p">.</span><span class="nx">Config</span><span class="p">({</span>
</span><span class="line">    <span class="nx">jax</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;input/TeX&quot;</span><span class="p">,</span> <span class="s2">&quot;output/HTML-CSS&quot;</span><span class="p">],</span>
</span><span class="line">    <span class="nx">tex2jax</span><span class="o">:</span> <span class="p">{</span>
</span><span class="line">    	<span class="nx">inlineMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;$&#39;</span><span class="p">,</span> <span class="s1">&#39;$&#39;</span><span class="p">]</span> <span class="p">],</span>
</span><span class="line">    	<span class="nx">displayMath</span><span class="o">:</span> <span class="p">[</span> <span class="p">[</span><span class="s1">&#39;$$&#39;</span><span class="p">,</span> <span class="s1">&#39;$$&#39;</span><span class="p">]],</span>
</span><span class="line">    	<span class="nx">processEscapes</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class="line">    	<span class="nx">skipTags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;script&#39;</span><span class="p">,</span> <span class="s1">&#39;noscript&#39;</span><span class="p">,</span> <span class="s1">&#39;style&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">,</span> <span class="s1">&#39;pre&#39;</span><span class="p">,</span> <span class="s1">&#39;code&#39;</span><span class="p">]</span> <span class="p">},</span>
</span><span class="line">    	<span class="nx">messageStyle</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">,</span>
</span><span class="line">    	<span class="s2">&quot;HTML-CSS&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="nx">preferredFont</span><span class="o">:</span> <span class="s2">&quot;TeX&quot;</span><span class="p">,</span> <span class="nx">availableFonts</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;STIX&quot;</span><span class="p">,</span><span class="s2">&quot;TeX&quot;</span><span class="p">]</span> <span class="p">}</span> <span class="p">});</span>
</span><span class="line"><span class="o">&lt;</span><span class="err">/script&gt;</span>
</span><span class="line"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML&quot;</span> <span class="nx">type</span><span class="o">=</span><span class="s2">&quot;text/javascript&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>添加之后，就在博客里面引入了MathJax，那么就可以在markdown里面直接输入公式了，例如：<code>$n^2$</code>就可以解析成$n^2$。</p>

<p>在引入MathJax之后，我更换了解析器，因为自带的<code>rdiscount</code>解析器对于MathJax的细节处理存在一些小问题。更换解析器，可以到<code>Gemfile</code>中添加：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">gem</span> <span class="s1">&#39;kramdown&#39;</span><span class="p">,</span> <span class="s1">&#39;~&gt; 0.13.8&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>然后在终端运行：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">bundle</span> <span class="n">install</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>最后，在<code>_config.yml</code>文件中，将解析器更换：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="ss">markdown</span><span class="p">:</span><span class="n">kramdown</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>使用kramdown，有两点需要注意：</p>

<ol>
  <li>公式无论行内行间都以<code>$$</code>开头；行间公式，必须独占一行；</li>
  <li>代码块开头必须空一行，否则代码高亮会失效。</li>
</ol>

<p>至于其它的，可以去<a href="http://kramdown.rubyforge.org/syntax.html">官方文档</a>查看。</p>

<h4 id="section-1">3. 更换主题</h4>
<p>如何更换主题，在之前的文章里面早已说过。这次就是将主题更换成了<code>bootstrap</code>。</p>

<h4 id="section-2">4. 侧边栏的修改</h4>

<h5 id="a-">a. 关于我</h5>
<p>添加自己的简介，可以在<code>custom/asides/</code>文件夹下添加<code>about.html</code>，然后添加内容：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;well&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;about&quot;</span> <span class="na">class=</span><span class="s">&#39;nav nav-list&#39;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;nav-header&quot;</span><span class="nt">&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/about&quot;</span><span class="nt">&gt;</span>关于我<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="line">      <span class="nt">&lt;p&gt;</span>介绍一下自己<span class="nt">&lt;/p&gt;</span>
</span><span class="line">      <span class="nt">&lt;p&gt;</span>可以留下联系方式，比如微博等等<span class="nt">&lt;/p&gt;</span>
</span><span class="line">  <span class="nt">&lt;/ul&gt;</span>
</span><span class="line"><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这里我使用了我博客主题的样式，就是里面的<code>class</code>和<code>id</code>的值。这些值需要你根据自己博客的主题样式设定，可以参看其自带的侧边栏的一些网页，比如<code>_includes/asides/recent_post.html</code>。</p>

<h5 id="b-">b. 文章分类</h5>
<p>给自己的文章分类，需要的操作稍微麻烦一些。首先需要在<code>plugins</code>目录下创建<code>category_list_tag.rb</code>文件：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class="line">  <span class="k">class</span> <span class="nc">CategoryListTag</span> <span class="o">&lt;</span> <span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Tag</span>
</span><span class="line">    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class="line">      <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="line">      <span class="n">categories</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">categories</span><span class="o">.</span><span class="n">keys</span>
</span><span class="line">      <span class="n">categories</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="o">|</span>
</span><span class="line">        <span class="n">posts_in_category</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">categories</span><span class="o">[</span><span class="n">category</span><span class="o">].</span><span class="n">size</span>
</span><span class="line">        <span class="n">category_dir</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span><span class="o">[</span><span class="s1">&#39;category_dir&#39;</span><span class="o">]</span>
</span><span class="line">        <span class="n">category_url</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">category_dir</span><span class="p">,</span> <span class="n">category</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/_|\P{Word}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/-{2,}/</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">downcase</span><span class="p">)</span>
</span><span class="line">        <span class="n">html</span> <span class="o">&lt;&lt;</span> <span class="s2">&quot;&lt;li class=&#39;category&#39;&gt;&lt;a href=&#39;/</span><span class="si">#{</span><span class="n">category_url</span><span class="si">}</span><span class="s2">/&#39;&gt;</span><span class="si">#{</span><span class="n">category</span><span class="si">}</span><span class="s2"> (</span><span class="si">#{</span><span class="n">posts_in_category</span><span class="si">}</span><span class="s2">)&lt;/a&gt;&lt;/li&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span class="line">      <span class="k">end</span>
</span><span class="line">      <span class="n">html</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;category_list&#39;</span><span class="p">,</span> <span class="ss">Jekyll</span><span class="p">:</span><span class="ss">:CategoryListTag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>然后新建<code>source/_includes/asides/category_list.html</code>：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;well&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;category_list&quot;</span> <span class="na">class=</span><span class="s">&quot;nav nav-list&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;nav-header&quot;</span><span class="nt">&gt;</span>文章分类<span class="nt">&lt;/li&gt;</span>
</span><span class="line">      <span class="nt">&lt;li</span> <span class="na">id=</span><span class="s">&quot;categories&quot;</span><span class="nt">&gt;</span>% category_list %}<span class="nt">&lt;/li&gt;</span>
</span><span class="line">  <span class="nt">&lt;/ul&gt;</span>
</span><span class="line"><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这样就可以了。</p>

<h5 id="c-">c. 推荐站点</h5>
<p>跟添加<strong>关于我</strong>类似，可以直接在<code>custom/asides/</code>目录下添加<code>links.html</code>：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;section</span> <span class="na">class=</span><span class="s">&quot;well&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;links&quot;</span> <span class="na">class=</span><span class="s">&quot;nav nav-list&quot;</span><span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;li</span> <span class="na">class=</span><span class="s">&quot;nav-header&quot;</span><span class="nt">&gt;</span>推荐站点<span class="nt">&lt;/li&gt;</span>
</span><span class="line">    <span class="nt">&lt;li&gt;</span>
</span><span class="line">      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://macshuo.com/&quot;</span><span class="nt">&gt;</span>MacTalk-池建强的随想录<span class="nt">&lt;/a&gt;</span>
</span><span class="line">    <span class="nt">&lt;/li&gt;</span>
</span><span class="line">    <span class="nt">&lt;li&gt;</span>
</span><span class="line">      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://yihui.name/&quot;</span><span class="nt">&gt;</span>Yihui Xie<span class="nt">&lt;/a&gt;</span>
</span><span class="line">    <span class="nt">&lt;/li&gt;</span>
</span><span class="line"><span class="nt">&lt;/ul&gt;</span>
</span><span class="line"><span class="nt">&lt;/section&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h5 id="d-license">d. License</h5>
<p>与推荐站点一样，可以在<code>custom/asides/</code>目录下添加<code>license.html</code>。然后到<a href="http://creativecommons.org/licenses/by-nc-sa/2.5/cn/">署名-非商业性使用-相同方式共享 2.5 中国大陆</a>网页获取license的网页代码。</p>

<p><strong>建好这些文件后，别忘了在<code>_config.yml</code>中修改侧边栏项：</strong></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">default_asides: [custom/asides/about.html, asides/category_list.html]
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-3">5. 其它一些修改</h4>

<ol>
  <li>将博客大部分文字换成了中文；</li>
  <li>去除了之前的Home页；</li>
  <li>修改各篇文章内部的图片大小，统一使用8cm*8cm；</li>
  <li>将所有的头部的导图长度加长。</li>
</ol>

<hr />

<h4 id="section-4">参考资源</h4>

<ol>
  <li>
    <p><a href="http://www.yanjiuyanjiu.com/blog/20130402/">研究研究: 我的Octopress配置</a></p>
  </li>
  <li>
    <p><a href="http://www.cnblogs.com/oec2003/archive/2013/05/31/3109577.html">冯威的学习专栏: Octopress博客设置</a></p>
  </li>
  <li>
    <p><a href="http://shanewfx.github.io/blog/2012/08/13/improve-blog-theme/">思考的轨迹: Octopress主题改造</a></p>
  </li>
  <li>
    <p><a href="https://www.google.com.hk/search?newwindow=1&amp;safe=strict&amp;espv=210&amp;es_sm=119&amp;q=octopress%E6%95%99%E7%A8%8B&amp;oq=octopress%E6%95%99%E7%A8%8B&amp;gs_l=serp.12..35i39.5308.6241.0.8806.10.8.0.0.0.1.237.921.0j3j2.5.0....0...1c.1j4.35.serp..6.4.789.PMKW2jRRdPI">。。。</a></p>
  </li>
</ol>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R语言记录7：相关分析]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/17/rseries7/"/>
    <updated>2014-03-17T16:46:47+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/17/rseries7</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical10.jpg" alt="aritical 10" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>变量之间的关系，大致可分为两种：<em>函数关系</em>和<em>相关关系</em>。</p>

<p>函数关系，简单来说就是可以将变量之间的关系用方程(其实就是函数)来描述：$y=f(x)$，处理这种关系对应的统计方法就是<strong><em>回归分析</em></strong>。</p>

<p>相关关系，就是指变量之间存在不完全确定的依赖关系，其数值不能够使用函数表示出来，这个对应的就是<strong><em>相关分析</em></strong>。</p>

<p>判断变量之间是否存在相关关系，最直接简单的方法就是画出两个变量之间的散点图。</p>

<h4 id="section">1. 散点图</h4>
<p>我们使用<code>cars</code>数据集中的数据进行演示,<code>cars</code>数据集中包含了汽车速度与制动距离的数据，显然直观感觉这两个变量之间肯定存在相关关系。画个散点图看看：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Correlation_Analysis.r</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> head<span class="p">(</span>cars<span class="p">)</span>
</span><span class="line">  speed dist
</span><span class="line"><span class="m">1</span>     <span class="m">4</span>    <span class="m">2</span>
</span><span class="line"><span class="m">2</span>     <span class="m">4</span>   <span class="m">10</span>
</span><span class="line"><span class="m">3</span>     <span class="m">7</span>    <span class="m">4</span>
</span><span class="line"><span class="m">4</span>     <span class="m">7</span>   <span class="m">22</span>
</span><span class="line"><span class="m">5</span>     <span class="m">8</span>   <span class="m">16</span>
</span><span class="line"><span class="m">6</span>     <span class="m">9</span>   <span class="m">10</span>
</span><span class="line"><span class="o">&gt;</span> with <span class="p">(</span>cars<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	plot<span class="p">(</span>speed<span class="p">,</span> dist<span class="p">)</span>
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>得到如下图形：</p>

<p><img src="http://jackycode.github.io/images/RSeries7/scatter.jpg" alt="scatter" /></p>

<p>从散点图看，汽车速度与其制动距离存在相关关系。但是，仅仅从图像来看，我们只能得到大概是否相关，而不能给出一个确切的描述。那么就希望能够找到一个方法，能够描述变量之间有多相关，程度有多大。</p>

<h4 id="section-1">2. 相关的种类</h4>
<p>根据相关程度，我们可以给相关进行分类：完全相关，不完全相关，完全不相关；而根据相关方向的不同，又可以分类：正相关(一个变大另一个也变大)，负相关。那么怎么用数学的方式去描述这些种类呢，那就需要用到相关系数。</p>

<h5 id="section-2">(1). 相关系数</h5>
<p>相关系数的符号用来代表正负相关($+$ -&gt; 正；$-$ -&gt; 负)，其值的大小用来描述相关程度的大小(0~1:完全不相关~完全相关)。相关系数的定义有很多，常用的有Person相关系数、Spearman相关系数等等。这里给出最常用的Person相关系数的计算方法：</p>

<script type="math/tex; mode=display">\gamma=\frac{\sum_{i=1}^{n}{(x_i-\overline{x})(y_i-\overline{y})}}{\sqrt{\sum_{i=1}^{n}{(x_i-\overline{x})^2}\sum_{i=1}^{n}{(y_i-\overline{y})^2}}}</script>

<p>当样本个数充分大时，样本相关系数可以作为总体相关系数的估计。</p>

<p>在R中，可以使用<code>cor</code>函数来得到变量间的相关系数矩阵：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Correlation_Analysis.r</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> cor<span class="p">(</span>cars<span class="p">)</span>
</span><span class="line">          speed      dist
</span><span class="line">speed <span class="m">1.0000000</span> <span class="m">0.8068949</span>
</span><span class="line">dist  <span class="m">0.8068949</span> <span class="m">1.0000000</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>可以看到，$corr(speed, dist)=0.8068949$，说明汽车速度与其制动距离之间存在较强的正相关关系。</p>

<h6 id="section-3">注：</h6>
<p>可以指定<code>cor</code>的参数得到不同的相关系数：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Correlation_Analysis.r</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> cor<span class="p">(</span>cars<span class="p">,</span> method<span class="o">=</span><span class="s">&#39;spearman&#39;</span><span class="p">)</span>
</span><span class="line">          speed      dist
</span><span class="line">speed <span class="m">1.0000000</span> <span class="m">0.8303568</span>
</span><span class="line">dist  <span class="m">0.8303568</span> <span class="m">1.0000000</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h5 id="section-4">(2). 相关性的显著性检验</h5>
<p>得到了两个变量之间的相关系数，那就需要检验，得到的结果是否能够通过显著性检验。即相关性到底显著与否。</p>

<p>这里需要建立假设检验：$H_0:$ 变量X和Y不相关；那么可以构造检验统计量如下：</p>

<script type="math/tex; mode=display">T = \frac{\gamma(X,Y)\sqrt{n-2}}{\sqrt{1-\gamma(X,Y)^2}}</script>

<p>在零假设成立的条件下，<script type="math/tex">T \sim t(n-2)</script>。那么若有$T &gt; t_{1-\alpha}(n-2)$，则拒绝原假设，说明变量X和Y存在显著的相关关系。</p>

<h6 id="section-5">注：这里提到的内容可以到参数统计的书籍上寻找。</h6>

<p>在R中，我们可以使用<code>cor.test</code>函数很轻松地对此进行检验：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Correlation_Analysis.r</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> with<span class="p">(</span>cars<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	cor.test<span class="p">(</span>speed<span class="p">,</span> dist<span class="p">)</span>
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span><span class="line">
</span><span class="line">	Pearson<span class="s">&#39;</span><span class="err">s product-moment correlation</span>
</span><span class="line">
</span><span class="line">data<span class="o">:</span>  speed and dist
</span><span class="line">t <span class="o">=</span> <span class="m">9.464</span><span class="p">,</span> df <span class="o">=</span> <span class="m">48</span><span class="p">,</span> p<span class="o">-</span>value <span class="o">=</span> <span class="m">1.49e-12</span>
</span><span class="line">alternative hypothesis<span class="o">:</span> true correlation is not equal to <span class="m">0</span>
</span><span class="line"><span class="m">95</span> percent confidence interval<span class="o">:</span>
</span><span class="line"> <span class="m">0.6816422</span> <span class="m">0.8862036</span>
</span><span class="line">sample estimates<span class="o">:</span>
</span><span class="line">      cor
</span><span class="line"><span class="m">0.8068949</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>从结果可以看到，$t=9.464$这个不容易看出来结果，因为还需要查表。我们可以选择直接看$p$值：1.49e-12，比0.05小太多了。故而拒绝原假设，认为汽车速度与制动距离存在高度相关关系。</p>

<h6 id="spearman">注：这里如何修改，使得其使用spearman相关系数呢？</h6>

<p>到此，就将相关分析的大致内容进行了阐述。但是，相关分析也还有很多其它内容，比如偏相关等等。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R语言记录6：描述统计2]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/14/rseries6/"/>
    <updated>2014-03-14T16:31:26+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/14/rseries6</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical9.jpg" alt="aritical 9" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<h4 id="section">二. 可视化</h4>
<p>开头我们就说过，描述性统计分析包括计算统计量的值，也可以进行制表画图。首先我们看看如何在R中绘制列联表：</p>

<h5 id="section-1">1. 频数表和列联表</h5>
<p>如果数据集中对应的变量都是定性变量，即是上一节中我们所说的分类数据（还记得分组数据的描述性统计量的计算吗）。对于这种数据，作图很多时候并没有太大的意义。一般，我们会采取绘制列联表的方式去描述数据。</p>

<p>在数据集<code>mtcars</code>中，有不少定性变量，这里取出其中的<code>am</code>,<code>gear</code>和<code>carb</code>作演示。首先看看一维的情况：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> dataSub <span class="o">&lt;-</span> data.frame<span class="p">(</span>am<span class="o">=</span>mtcars<span class="o">$</span>am<span class="p">,</span> gear<span class="o">=</span>mtcars<span class="o">$</span>gear<span class="p">,</span> carb<span class="o">=</span>mtcars<span class="o">$</span>carb<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> head<span class="p">(</span>dataSub<span class="p">)</span>
</span><span class="line">  am gear carb
</span><span class="line"><span class="m">1</span>  <span class="m">1</span>    <span class="m">4</span>    <span class="m">4</span>
</span><span class="line"><span class="m">2</span>  <span class="m">1</span>    <span class="m">4</span>    <span class="m">4</span>
</span><span class="line"><span class="m">3</span>  <span class="m">1</span>    <span class="m">4</span>    <span class="m">1</span>
</span><span class="line"><span class="m">4</span>  <span class="m">0</span>    <span class="m">3</span>    <span class="m">1</span>
</span><span class="line"><span class="m">5</span>  <span class="m">0</span>    <span class="m">3</span>    <span class="m">2</span>
</span><span class="line"><span class="m">6</span>  <span class="m">0</span>    <span class="m">3</span>    <span class="m">1</span>
</span><span class="line"><span class="o">&gt;</span> with<span class="p">(</span>dataSub<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	mytable <span class="o">&lt;-</span> list<span class="p">(</span>table<span class="p">(</span>am<span class="p">),</span> table<span class="p">(</span>gear<span class="p">),</span> table<span class="p">(</span>carb<span class="p">))</span>
</span><span class="line"><span class="o">+</span> 	mytable
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span><span class="line"><span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
</span><span class="line">am
</span><span class="line"> <span class="m">0</span>  <span class="m">1</span>
</span><span class="line"><span class="m">19</span> <span class="m">13</span>
</span><span class="line">
</span><span class="line"><span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
</span><span class="line">gear
</span><span class="line"> <span class="m">3</span>  <span class="m">4</span>  <span class="m">5</span>
</span><span class="line"><span class="m">15</span> <span class="m">12</span>  <span class="m">5</span>
</span><span class="line">
</span><span class="line"><span class="p">[[</span><span class="m">3</span><span class="p">]]</span>
</span><span class="line">carb
</span><span class="line"> <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>  <span class="m">4</span>  <span class="m">6</span>  <span class="m">8</span>
</span><span class="line"> <span class="m">7</span> <span class="m">10</span>  <span class="m">3</span> <span class="m">10</span>  <span class="m">1</span>  <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>一维的情况，其实就是统计频数，把每个类别各自的频数计算出来就可以了。像<code>am</code>变量，其结果告诉我们，用自动挡的有19人，用手动挡的是13人(0 -&gt; 19; 1 -&gt; 13)。再来看看二维的：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> with<span class="p">(</span>dataSub<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	mytable2 <span class="o">&lt;-</span> list<span class="p">(</span>table<span class="p">(</span>am<span class="p">,</span> carb<span class="p">),</span> table<span class="p">(</span>carb<span class="p">,</span> am<span class="p">))</span>
</span><span class="line"><span class="o">+</span> 	mytable2
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span><span class="line"><span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
</span><span class="line">   carb
</span><span class="line">am  <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span>
</span><span class="line">  <span class="m">0</span> <span class="m">3</span> <span class="m">6</span> <span class="m">3</span> <span class="m">7</span> <span class="m">0</span> <span class="m">0</span>
</span><span class="line">  <span class="m">1</span> <span class="m">4</span> <span class="m">4</span> <span class="m">0</span> <span class="m">3</span> <span class="m">1</span> <span class="m">1</span>
</span><span class="line">
</span><span class="line"><span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
</span><span class="line">    am
</span><span class="line">carb <span class="m">0</span> <span class="m">1</span>
</span><span class="line">   <span class="m">1</span> <span class="m">3</span> <span class="m">4</span>
</span><span class="line">   <span class="m">2</span> <span class="m">6</span> <span class="m">4</span>
</span><span class="line">   <span class="m">3</span> <span class="m">3</span> <span class="m">0</span>
</span><span class="line">   <span class="m">4</span> <span class="m">7</span> <span class="m">3</span>
</span><span class="line">   <span class="m">6</span> <span class="m">0</span> <span class="m">1</span>
</span><span class="line">   <span class="m">8</span> <span class="m">0</span> <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>可以看到，对于二维来说，绘制的方法与一维类似。但是，这里有个可以深入的东西，那就是边际列表。也就是利用二维列联表得到一维列联表：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> with<span class="p">(</span>dataSub<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	mytable2 <span class="o">&lt;-</span> list<span class="p">(</span>table<span class="p">(</span>am<span class="p">,</span> carb<span class="p">),</span> table<span class="p">(</span>carb<span class="p">,</span> am<span class="p">))</span>
</span><span class="line"><span class="o">+</span> 	mytableConvert <span class="o">&lt;-</span> list<span class="p">(</span>margin.table<span class="p">(</span>mytable2<span class="p">[[</span><span class="m">1</span><span class="p">]],</span> <span class="m">1</span><span class="p">),</span>
</span><span class="line"><span class="o">+</span> 		margin.table<span class="p">(</span>mytable2<span class="p">[[</span><span class="m">1</span><span class="p">]],</span> <span class="m">2</span><span class="p">))</span> <span class="c1"># 选项1和2控制按行和按列</span>
</span><span class="line"><span class="o">+</span> 	mytableConvert
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span><span class="line"><span class="p">[[</span><span class="m">1</span><span class="p">]]</span>
</span><span class="line">am
</span><span class="line"> <span class="m">0</span>  <span class="m">1</span>
</span><span class="line"><span class="m">19</span> <span class="m">13</span>
</span><span class="line">
</span><span class="line"><span class="p">[[</span><span class="m">2</span><span class="p">]]</span>
</span><span class="line">carb
</span><span class="line"> <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>  <span class="m">4</span>  <span class="m">6</span>  <span class="m">8</span>
</span><span class="line"> <span class="m">7</span> <span class="m">10</span>  <span class="m">3</span> <span class="m">10</span>  <span class="m">1</span>  <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>可以看到，使用<code>margin.table</code>函数可以很容易得到一个列表的边际列表。下面看看三维的情况：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> with<span class="p">(</span>dataSub<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	mytable3 <span class="o">&lt;-</span> table<span class="p">(</span>am<span class="p">,</span> carb<span class="p">,</span> gear<span class="p">)</span>
</span><span class="line"><span class="o">+</span> 	mytable3
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span><span class="line"><span class="p">,</span> <span class="p">,</span> gear <span class="o">=</span> <span class="m">3</span>
</span><span class="line">
</span><span class="line">   carb
</span><span class="line">am  <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span>
</span><span class="line">  <span class="m">0</span> <span class="m">3</span> <span class="m">4</span> <span class="m">3</span> <span class="m">5</span> <span class="m">0</span> <span class="m">0</span>
</span><span class="line">  <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
</span><span class="line">
</span><span class="line"><span class="p">,</span> <span class="p">,</span> gear <span class="o">=</span> <span class="m">4</span>
</span><span class="line">
</span><span class="line">   carb
</span><span class="line">am  <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span>
</span><span class="line">  <span class="m">0</span> <span class="m">0</span> <span class="m">2</span> <span class="m">0</span> <span class="m">2</span> <span class="m">0</span> <span class="m">0</span>
</span><span class="line">  <span class="m">1</span> <span class="m">4</span> <span class="m">2</span> <span class="m">0</span> <span class="m">2</span> <span class="m">0</span> <span class="m">0</span>
</span><span class="line">
</span><span class="line"><span class="p">,</span> <span class="p">,</span> gear <span class="o">=</span> <span class="m">5</span>
</span><span class="line">
</span><span class="line">   carb
</span><span class="line">am  <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span>
</span><span class="line">  <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span>
</span><span class="line">  <span class="m">1</span> <span class="m">0</span> <span class="m">2</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>其实<code>table</code>函数可以处理三维以及三维以上的列联表，你可以自己试一试。现在我们已经能够使用R轻松地绘制出频数表了，但很多时候，我们希望得到的是频率表，那应该怎么绘制呢？试试这个函数<code>prop.table()</code>：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> with<span class="p">(</span>dataSub<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	mytable <span class="o">&lt;-</span> list<span class="p">(</span>table<span class="p">(</span>am<span class="p">),</span> table<span class="p">(</span>gear<span class="p">),</span> table<span class="p">(</span>carb<span class="p">))</span>
</span><span class="line"><span class="o">+</span> 	prop.table<span class="p">(</span>mytable<span class="p">[[</span><span class="m">1</span><span class="p">]])</span>
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span><span class="line">am
</span><span class="line">      <span class="m">0</span>       <span class="m">1</span>
</span><span class="line"><span class="m">0.59375</span> <span class="m">0.40625</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>二维以及以上都可以这么处理。那么，如果需要求的是全局相对频率列联表呢？想想，那不就是频数除以总数嘛，直接一句代码不就搞定了嘛：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> with<span class="p">(</span>dataSub<span class="p">,</span> <span class="p">{</span>
</span><span class="line"><span class="o">+</span> 	mytable2 <span class="o">&lt;-</span> list<span class="p">(</span>table<span class="p">(</span>am<span class="p">,</span> carb<span class="p">),</span> table<span class="p">(</span>carb<span class="p">,</span> am<span class="p">))</span>
</span><span class="line"><span class="o">+</span> 	mytable2<span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="o">/</span>sum<span class="p">(</span>mytable2<span class="p">[[</span><span class="m">1</span><span class="p">]])</span>
</span><span class="line"><span class="o">+</span> <span class="p">})</span>
</span><span class="line">   carb
</span><span class="line">am        <span class="m">1</span>       <span class="m">2</span>       <span class="m">3</span>       <span class="m">4</span>       <span class="m">6</span>       <span class="m">8</span>
</span><span class="line">  <span class="m">0</span> <span class="m">0.09375</span> <span class="m">0.18750</span> <span class="m">0.09375</span> <span class="m">0.21875</span> <span class="m">0.00000</span> <span class="m">0.00000</span>
</span><span class="line">  <span class="m">1</span> <span class="m">0.12500</span> <span class="m">0.12500</span> <span class="m">0.00000</span> <span class="m">0.09375</span> <span class="m">0.03125</span> <span class="m">0.03125</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h5 id="section-2">2. 图形</h5>
<p>常用的图形一般有：直方图，散点图，框须图等等。我们一个一个来看一下：</p>

<h6 id="a-">a. 直方图</h6>
<p>我们使用<code>mtcars$mpg</code>数据作演示，首先你可以检查一下<code>mpg</code>的范围，然后确定频数直方图的分割大小(使用参数<code>break</code>设定)，这里我们不设定，让R自动生成：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> range<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">10.4</span> <span class="m">33.9</span>
</span><span class="line"><span class="o">&gt;</span> hist<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>得到如下的图形：</p>

<p><img src="http://jackycode.github.io/images/RSeries6/Histogram1.jpg" alt="Histogram1" /></p>

<p>其实更多地，我们希望得到频率直方图，并且给出其核密度曲线以及正态密度曲线。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> hist<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">,</span> probability<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> dens <span class="o">&lt;-</span> density<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> mean <span class="o">&lt;-</span> mean<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> sd <span class="o">&lt;-</span> sd<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> lines<span class="p">(</span>dens<span class="p">,</span> col<span class="o">=</span><span class="s">&#39;red&#39;</span><span class="p">,</span> lty<span class="o">=</span><span class="m">2</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> curve<span class="p">(</span>dnorm<span class="p">(</span>x<span class="p">,</span> mean<span class="p">,</span> sd<span class="p">),</span> col<span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">,</span> add<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> legend<span class="p">(</span><span class="s">&quot;topright&quot;</span><span class="p">,</span> inset <span class="o">=</span> <span class="m">0.05</span><span class="p">,</span> c<span class="p">(</span><span class="s">&quot;density&quot;</span><span class="p">,</span> <span class="s">&quot;normal&quot;</span><span class="p">),</span>
</span><span class="line"><span class="o">+</span>   lty <span class="o">=</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> col <span class="o">=</span> c<span class="p">(</span><span class="s">&quot;red&quot;</span><span class="p">,</span> <span class="s">&quot;blue&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>得到图形如下：</p>

<p><img src="http://jackycode.github.io/images/RSeries6/Histogram2.jpg" alt="Histogram2" /></p>

<h6 id="b-">b. 散点图</h6>
<p>我们可以使用<code>plot</code>函数直接画出散点图，此外，我这里还给散点图加上了一条拟合曲线。<code>lowess()</code>函数可以用特殊的曲线对二维数据进行非线性拟合(多维的情况需要使用<code>loess()</code>函数)。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> plot<span class="p">(</span>mtcars<span class="o">$</span>disp <span class="o">~</span> mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> lines<span class="p">(</span>lowess<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">,</span> mtcars<span class="o">$</span>disp<span class="p">),</span> lwd<span class="o">=</span><span class="m">2</span><span class="p">,</span> col<span class="o">=</span><span class="s">&#39;blue&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img src="http://jackycode.github.io/images/RSeries6/Scatter.jpg" alt="Scatter" /></p>

<h6 id="c-">c. 框须图</h6>
<p>框须图,也称为盒形图、箱线图。其通过绘制连续型变量的五数(最小最大值，中位数以及上下侧四分位数)来描述变量的分布。可以使用<code>boxplot</code>函数来得到：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> boxplot<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img src="http://jackycode.github.io/images/RSeries6/box1.jpg" alt="box1" /></p>

<p>也可以使用<code>boxplot</code>函数展示分组变量，例如这里<code>mtcars</code>中有<code>am</code>变量，可以使用该函数画出不同的<code>am</code>值对应的箱线图：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptvie_statistics2.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> boxplot<span class="p">(</span>mpg <span class="o">~</span> am<span class="p">,</span> data<span class="o">=</span>mtcars<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><img src="http://jackycode.github.io/images/RSeries6/box2.jpg" alt="box2" /></p>

<p>到这边，就基本上把描述统计的一些主体内容说了一下。不过，描述统计并不是只有这点东西，此外，我讲的这些作图啊，制表啊其实都没有深入地去讲。而且对于R语言的研究学习来说，我上面做的图还太简单了，没有给图起名称，也没有横纵轴的名称等等。这些在R语言的帮助文档里有详细的讲解说明，有兴趣的话可以看看。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R语言记录5：描述统计1]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/12/rseries5/"/>
    <updated>2014-03-12T15:57:02+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/12/rseries5</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical8.jpg" alt="aritical 8" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>数据的统计分析分为：<strong><em>描述性统计分析</em></strong>和<strong><em>统计推断</em></strong>两个部分。描述性统计分析，一般又称为探索性统计分析。简单来讲，描述统计就是用简单直观的方法给出数据的一种易于理解的描述，比如说散点图，频率直方图；又或者计算简单的统计量，如均值方差等等。下面先来看看如何计算常用的描述性统计量：</p>

<h4 id="section">一. 描述性统计量</h4>

<h5 id="section-1">1. 单组数据</h5>
<p>常用的描述性统计量大致有这么几个：</p>

<h6 id="n">1. 样本大小。即样本的个数，一般用$n$表示；</h6>

<h6 id="overlinexfrac1nsumi1nxi">2. 样本均值。即$\overline{X}=\frac{1}{n}\sum_{i=1}^{n}{X_i}$；</h6>

<h6 id="s2frac1nsumi1nxi-overlinex2">3. 样本方差。即$s^2=\frac{1}{n}\sum_{i=1}^{n}{(X_i-\overline{X})^2}$;</h6>

<h6 id="section-2">4. 样本分位数、偏度、峰度等等。</h6>

<p>在R语言中，<code>summary()</code>函数可以得到样本数据的最小值、最大值、四分位数以及均值。这里我们使用R语言自带的数据集<code>mtcars</code>作演示，你可以使用我们之前教过的方法先看看<code>mtcars</code>中的数据长什么样子(<code>head</code>函数，<code>??</code>得到帮助)。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptive_statistics1.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> str<span class="p">(</span>mtcars<span class="p">)</span> <span class="c1"># 可以查看数据集的一些基本信息</span>
</span><span class="line"><span class="s">&#39;data.frame&#39;</span><span class="o">:</span>	<span class="m">32</span> obs. of  <span class="m">11</span> variables<span class="o">:</span>
</span><span class="line"> <span class="o">$</span> mpg <span class="o">:</span> num  <span class="m">21</span> <span class="m">21</span> <span class="m">22.8</span> <span class="m">21.4</span> <span class="m">18.7</span> <span class="m">18.1</span> <span class="m">14.3</span> <span class="m">24.4</span> <span class="m">22.8</span> <span class="m">19.2</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> cyl <span class="o">:</span> num  <span class="m">6</span> <span class="m">6</span> <span class="m">4</span> <span class="m">6</span> <span class="m">8</span> <span class="m">6</span> <span class="m">8</span> <span class="m">4</span> <span class="m">4</span> <span class="m">6</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> disp<span class="o">:</span> num  <span class="m">160</span> <span class="m">160</span> <span class="m">108</span> <span class="m">258</span> <span class="m">360</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> hp  <span class="o">:</span> num  <span class="m">110</span> <span class="m">110</span> <span class="m">93</span> <span class="m">110</span> <span class="m">175</span> <span class="m">105</span> <span class="m">245</span> <span class="m">62</span> <span class="m">95</span> <span class="m">123</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> drat<span class="o">:</span> num  <span class="m">3.9</span> <span class="m">3.9</span> <span class="m">3.85</span> <span class="m">3.08</span> <span class="m">3.15</span> <span class="m">2.76</span> <span class="m">3.21</span> <span class="m">3.69</span> <span class="m">3.92</span> <span class="m">3.92</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> wt  <span class="o">:</span> num  <span class="m">2.62</span> <span class="m">2.88</span> <span class="m">2.32</span> <span class="m">3.21</span> <span class="m">3.44</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> qsec<span class="o">:</span> num  <span class="m">16.5</span> <span class="m">17</span> <span class="m">18.6</span> <span class="m">19.4</span> <span class="m">17</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> vs  <span class="o">:</span> num  <span class="m">0</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">0</span> <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> am  <span class="o">:</span> num  <span class="m">1</span> <span class="m">1</span> <span class="m">1</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> gear<span class="o">:</span> num  <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="m">3</span> <span class="m">3</span> <span class="m">3</span> <span class="m">3</span> <span class="m">4</span> <span class="m">4</span> <span class="m">4</span> <span class="kc">...</span>
</span><span class="line"> <span class="o">$</span> carb<span class="o">:</span> num  <span class="m">4</span> <span class="m">4</span> <span class="m">1</span> <span class="m">1</span> <span class="m">2</span> <span class="m">1</span> <span class="m">4</span> <span class="m">2</span> <span class="m">2</span> <span class="m">4</span> <span class="kc">...</span>
</span><span class="line"><span class="o">&gt;</span> summary<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line">   Min. <span class="m">1</span>st Qu.  Median    Mean <span class="m">3</span>rd Qu.    Max.
</span><span class="line">  <span class="m">10.40</span>   <span class="m">15.42</span>   <span class="m">19.20</span>   <span class="m">20.09</span>   <span class="m">22.80</span>   <span class="m">33.90</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>可以使用<code>mean</code>和<code>sd</code>函数得到样本均值和样本标准差，<code>quantile</code>函数计算样本分位数：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptive_statistics1.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> mean<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">20.09062</span>
</span><span class="line"><span class="o">&gt;</span> sd<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">6.026948</span>
</span><span class="line"><span class="o">&gt;</span> quantile<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">,</span> <span class="m">0.25</span><span class="p">)</span>
</span><span class="line">   <span class="m">25</span><span class="o">% </span>
</span><span class="line"><span class="o">15.425 </span>
</span><span class="line"><span class="o">&gt; quantile(mtcars$mpg, c(0.25, 0.75))</span>
</span><span class="line"><span class="o">   25%</span>    <span class="m">75</span>%
</span><span class="line"><span class="m">15.425</span> <span class="m">22.800</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>但是在R的基础包里面并没有计算偏度(skewness)和峰度(kurtosis)的函数，我们可以自定义一个函数，用来计算常用的描述性统计量：</p>

<p>首先给出偏度$\beta_s$与峰度$\beta_k$的计算公式：</p>

<script type="math/tex; mode=display">\beta_s = \frac{E(X-E(X))^3}{[E(X-E(X))^2]^{3/2}}</script>

<script type="math/tex; mode=display">\beta_k = \frac{E(X-E(X))^4}{[E(X-E(X))^2]^2} - 3</script>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptive_statistics1.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> desc.stats <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">,</span> na.omit<span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># na.omit=TRUE 表示忽略缺失值</span>
</span><span class="line"><span class="o">+</span> 	<span class="kr">if</span> <span class="p">(</span>na.omit<span class="p">)</span>
</span><span class="line"><span class="o">+</span> 		x <span class="o">&lt;-</span> x<span class="p">[</span><span class="o">!</span>is.na<span class="p">(</span>x<span class="p">)]</span>
</span><span class="line"><span class="o">+</span> 	
</span><span class="line"><span class="o">+</span> 	n <span class="o">&lt;-</span> length<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="o">+</span> 	mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="o">+</span> 	var <span class="o">&lt;-</span> var<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="o">+</span> 	sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="o">+</span> 	skew <span class="o">&lt;-</span> sum<span class="p">((</span>x<span class="o">-</span>mean<span class="p">)</span><span class="o">^</span><span class="m">3</span><span class="o">/</span>sd<span class="o">^</span><span class="m">3</span><span class="p">)</span><span class="o">/</span>n
</span><span class="line"><span class="o">+</span> 	kurt <span class="o">&lt;-</span> sum<span class="p">((</span>x<span class="o">-</span>mean<span class="p">)</span><span class="o">^</span><span class="m">4</span><span class="o">/</span>sd<span class="o">^</span><span class="m">4</span><span class="p">)</span><span class="o">/</span>n <span class="o">-</span> <span class="m">3</span>
</span><span class="line"><span class="o">+</span> 	
</span><span class="line"><span class="o">+</span> 	<span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>mean<span class="o">=</span>mean<span class="p">,</span> Variance<span class="o">=</span>var<span class="p">,</span> skewness<span class="o">=</span>skew<span class="p">,</span> kurtosis<span class="o">=</span>kurt<span class="p">))</span>
</span><span class="line"><span class="o">+</span> <span class="p">}</span>
</span><span class="line"><span class="o">&gt;</span> desc.stats<span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span>
</span><span class="line"><span class="o">$</span>mean
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">20.09062</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>Variance
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">36.3241</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>skewness
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.610655</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>kurtosis
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.372766</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>到此为止，我们就可以使用R语言对一组数据进行简单的探索性分析了。其实，在R语言的很多扩展包里面，都有计算描述性统计量的函数，例如Hmisc包中有<code>describe()</code>函数，可以返回变量数目，缺失值数目，均值，分位数等等信息；在fBasic包中有<code>skewness()</code>和<code>kurtosis()</code>函数，可以分别求偏度与峰度，在该包内还有一个函数，<code>basicStats()</code>可以得到大部分的描述性统计量。</p>

<h5 id="section-3">2. 多组数据</h5>
<p>若是存在多组数据，那么在R中如何对数据进行统计量的计算呢？我们不妨先来试试<code>summary</code>函数能否对多组数据做出很好的处理：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptive_statistics1.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> mtcars.sub <span class="o">&lt;-</span> data.frame<span class="p">(</span>mpg<span class="o">=</span>mtcars<span class="o">$</span>mpg<span class="p">,</span> wt<span class="o">=</span>mtcars<span class="o">$</span>wt<span class="p">)</span> <span class="c1"># 取出两个变量</span>
</span><span class="line"><span class="o">&gt;</span> summary<span class="p">(</span>mtcars.sub<span class="p">)</span>
</span><span class="line">      mpg              wt
</span><span class="line"> Min.   <span class="o">:</span><span class="m">10.40</span>   Min.   <span class="o">:</span><span class="m">1.513</span>
</span><span class="line"> <span class="m">1</span>st Qu.<span class="o">:</span><span class="m">15.43</span>   <span class="m">1</span>st Qu.<span class="o">:</span><span class="m">2.581</span>
</span><span class="line"> Median <span class="o">:</span><span class="m">19.20</span>   Median <span class="o">:</span><span class="m">3.325</span>
</span><span class="line"> Mean   <span class="o">:</span><span class="m">20.09</span>   Mean   <span class="o">:</span><span class="m">3.217</span>
</span><span class="line"> <span class="m">3</span>rd Qu.<span class="o">:</span><span class="m">22.80</span>   <span class="m">3</span>rd Qu.<span class="o">:</span><span class="m">3.610</span>
</span><span class="line"> Max.   <span class="o">:</span><span class="m">33.90</span>   Max.   <span class="o">:</span><span class="m">5.424</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>显然，<code>summary</code>函数能够直接对多组数据进行计算。那么怎么批量地对多组数据使用我们自定义的函数<code>desc.stats</code>呢？还记得我们曾经介绍过<code>sapply</code>函数吗，想想它的功能就知道如何解决这个问题了吧。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptive_statistics1.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> sapply<span class="p">(</span>mtcars.sub<span class="p">,</span> desc.stats<span class="p">)</span>
</span><span class="line">         mpg       wt
</span><span class="line">mean     <span class="m">20.09062</span>  <span class="m">3.21725</span>
</span><span class="line">Variance <span class="m">36.3241</span>   <span class="m">0.957379</span>
</span><span class="line">skewness <span class="m">0.610655</span>  <span class="m">0.4231465</span>
</span><span class="line">kurtosis <span class="m">-0.372766</span> <span class="m">-0.02271075</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h5 id="section-4">3. 分组数据</h5>
<p>我们知道，很多时候我们会对数据进行分类。像这里的数据<code>mtcars</code>，其有变量<code>am</code>用来表示自动挡(0)和手动挡(1)。那么我们就需要对其进行分组，然后求出各组的描述性统计量。还记得<code>tapply()</code>,<code>by()</code>和<code>aggregate()</code>函数吗?试试看：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptive_statistics1.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> mtcars.sub2 <span class="o">&lt;-</span> data.frame<span class="p">(</span>mpg<span class="o">=</span>mtcars<span class="o">$</span>mpg<span class="p">,</span> am<span class="o">=</span>mtcars<span class="o">$</span>am<span class="p">,</span> carb<span class="o">=</span>mtcars<span class="o">$</span>carb<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> tapply<span class="p">(</span>mtcars.sub2<span class="o">$</span>mpg<span class="p">,</span> mtcars.sub2<span class="o">$</span>am<span class="p">,</span> summary<span class="p">)</span>
</span><span class="line"><span class="o">$</span><span class="sb">`0`</span>
</span><span class="line">   Min. <span class="m">1</span>st Qu.  Median    Mean <span class="m">3</span>rd Qu.    Max.
</span><span class="line">  <span class="m">10.40</span>   <span class="m">14.95</span>   <span class="m">17.30</span>   <span class="m">17.15</span>   <span class="m">19.20</span>   <span class="m">24.40</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span><span class="sb">`1`</span>
</span><span class="line">   Min. <span class="m">1</span>st Qu.  Median    Mean <span class="m">3</span>rd Qu.    Max.
</span><span class="line">  <span class="m">15.00</span>   <span class="m">21.00</span>   <span class="m">22.80</span>   <span class="m">24.39</span>   <span class="m">30.40</span>   <span class="m">33.90</span>
</span><span class="line">
</span><span class="line"><span class="o">&gt;</span> by<span class="p">(</span>mtcars.sub2<span class="o">$</span>mpg<span class="p">,</span> mtcars.sub2<span class="o">$</span>am<span class="p">,</span> summary<span class="p">)</span>
</span><span class="line">mtcars.sub2<span class="o">$</span>am<span class="o">:</span> <span class="m">0</span>
</span><span class="line">   Min. <span class="m">1</span>st Qu.  Median    Mean <span class="m">3</span>rd Qu.    Max.
</span><span class="line">  <span class="m">10.40</span>   <span class="m">14.95</span>   <span class="m">17.30</span>   <span class="m">17.15</span>   <span class="m">19.20</span>   <span class="m">24.40</span>
</span><span class="line"><span class="o">------------------------------------------------------------</span>
</span><span class="line">mtcars.sub2<span class="o">$</span>am<span class="o">:</span> <span class="m">1</span>
</span><span class="line">   Min. <span class="m">1</span>st Qu.  Median    Mean <span class="m">3</span>rd Qu.    Max.
</span><span class="line">  <span class="m">15.00</span>   <span class="m">21.00</span>   <span class="m">22.80</span>   <span class="m">24.39</span>   <span class="m">30.40</span>   <span class="m">33.90</span>
</span><span class="line"><span class="o">&gt;</span>
</span><span class="line"><span class="o">&gt;</span> aggregate<span class="p">(</span>mpg <span class="o">~</span> am<span class="p">,</span> mtcars.sub2<span class="p">,</span> summary<span class="p">)</span>
</span><span class="line">  am mpg.Min. mpg.1st Qu. mpg.Median mpg.Mean mpg.3rd Qu. mpg.Max.
</span><span class="line"><span class="m">1</span>  <span class="m">0</span>    <span class="m">10.40</span>       <span class="m">14.95</span>      <span class="m">17.30</span>    <span class="m">17.15</span>       <span class="m">19.20</span>    <span class="m">24.40</span>
</span><span class="line"><span class="m">2</span>  <span class="m">1</span>    <span class="m">15.00</span>       <span class="m">21.00</span>      <span class="m">22.80</span>    <span class="m">24.39</span>       <span class="m">30.40</span>    <span class="m">33.90</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>同样的，如果存在多个分类，我们依旧可以使用上面的函数作出处理：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>descriptive_statistics1.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> aggregate<span class="p">(</span>mpg <span class="o">~</span> am<span class="o">+</span>carb<span class="p">,</span> mtcars.sub2<span class="p">,</span> summary<span class="p">)</span>
</span><span class="line">  am carb mpg.Min. mpg.1st Qu. mpg.Median mpg.Mean mpg.3rd Qu. mpg.Max.
</span><span class="line"><span class="m">1</span>  <span class="m">0</span>    <span class="m">1</span>    <span class="m">18.10</span>       <span class="m">19.75</span>      <span class="m">21.40</span>    <span class="m">20.33</span>       <span class="m">21.45</span>    <span class="m">21.50</span>
</span><span class="line"><span class="m">2</span>  <span class="m">1</span>    <span class="m">1</span>    <span class="m">22.80</span>       <span class="m">26.18</span>      <span class="m">29.85</span>    <span class="m">29.10</span>       <span class="m">32.78</span>    <span class="m">33.90</span>
</span><span class="line"><span class="m">3</span>  <span class="m">0</span>    <span class="m">2</span>    <span class="m">15.20</span>       <span class="m">16.30</span>      <span class="m">18.95</span>    <span class="m">19.30</span>       <span class="m">21.90</span>    <span class="m">24.40</span>
</span><span class="line"><span class="m">4</span>  <span class="m">1</span>    <span class="m">2</span>    <span class="m">21.40</span>       <span class="m">24.85</span>      <span class="m">28.20</span>    <span class="m">27.05</span>       <span class="m">30.40</span>    <span class="m">30.40</span>
</span><span class="line"><span class="m">5</span>  <span class="m">0</span>    <span class="m">3</span>    <span class="m">15.20</span>       <span class="m">15.80</span>      <span class="m">16.40</span>    <span class="m">16.30</span>       <span class="m">16.85</span>    <span class="m">17.30</span>
</span><span class="line"><span class="m">6</span>  <span class="m">0</span>    <span class="m">4</span>    <span class="m">10.40</span>       <span class="m">11.85</span>      <span class="m">14.30</span>    <span class="m">14.30</span>       <span class="m">16.25</span>    <span class="m">19.20</span>
</span><span class="line"><span class="m">7</span>  <span class="m">1</span>    <span class="m">4</span>    <span class="m">15.80</span>       <span class="m">18.40</span>      <span class="m">21.00</span>    <span class="m">19.27</span>       <span class="m">21.00</span>    <span class="m">21.00</span>
</span><span class="line"><span class="m">8</span>  <span class="m">1</span>    <span class="m">6</span>    <span class="m">19.70</span>       <span class="m">19.70</span>      <span class="m">19.70</span>    <span class="m">19.70</span>       <span class="m">19.70</span>    <span class="m">19.70</span>
</span><span class="line"><span class="m">9</span>  <span class="m">1</span>    <span class="m">8</span>    <span class="m">15.00</span>       <span class="m">15.00</span>      <span class="m">15.00</span>    <span class="m">15.00</span>       <span class="m">15.00</span>    <span class="m">15.00</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>到此为止，就介绍完了如何使用R计算描述性统计量的内容。下一次我们讲看看如何将数据可视化，也就是如何在R中作图以及制表。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R语言记录4：自定义函数的深入]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/10/rseries4/"/>
    <updated>2014-03-10T16:50:29+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/10/rseries4</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical7.jpg" alt="aritical 7" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>在第一份笔记中，已经介绍过控制语句以及自定义函数。但是当时讲的很简单，只是讲了语法。这次打算深入介绍一下，如何在R中写出一个稳健的自定义函数。首先先介绍一个常用的控制语句<code>ifelse</code>。</p>

<h4 id="ifelse">一. 善用<code>ifelse</code></h4>

<h6 id="section">1. 首先生成一组成绩数据</h6>
<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ifelse_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> scoreList <span class="o">&lt;-</span> list<span class="p">()</span>
</span><span class="line"><span class="o">&gt;</span> scoreList<span class="o">$</span>name <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;Wang&quot;</span><span class="p">,</span> <span class="s">&quot;Li&quot;</span><span class="p">,</span> <span class="s">&quot;Sun&quot;</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> scoreList<span class="o">$</span>score <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">90</span><span class="p">,</span> <span class="m">50</span><span class="p">,</span> <span class="m">70</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="section-1">2. 然后对成绩进行分级</h6>
<p>一般来说，可能我们会想到利用循环，在学生成绩中一个一个比较。大于$60$及格，小于就不及格。但是循环相对而言是费资源的，在R语言中，处理像这种问题，完全可以避开循环去做。回想一下，之前讲<code>any</code>和<code>all</code>函数时，可以使用<code>which</code>函数取出满足条件的元素的位置。当然这也是一个不错的方式，但其实还有更好的方法，那就是利用<code>ifelse</code>函数：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ifelse_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> con <span class="o">&lt;-</span> scoreList<span class="o">$</span>score <span class="o">&gt;</span> <span class="m">60</span>
</span><span class="line"><span class="o">&gt;</span> scoreList<span class="o">$</span>level <span class="o">&lt;-</span> ifelse<span class="p">(</span>con<span class="p">,</span> <span class="s">&quot;good&quot;</span><span class="p">,</span> <span class="s">&quot;not good&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>如果使用<code>which</code>函数的话，也不复杂：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ifelse_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> scoreList<span class="o">$</span>level2 <span class="o">&lt;-</span> rep<span class="p">(</span><span class="s">&quot;good&quot;</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> scoreList<span class="o">$</span>level2<span class="p">[</span>which<span class="p">(</span>scoreList<span class="o">$</span>score<span class="o">&lt;</span><span class="m">60</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s">&quot;not good&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>上面两种方式比较起来的话，当然个人更喜欢第一种啦。便于理解逻辑性也强。不过第二种方式怎么看怎么觉得牛，哈哈。</p>

<h4 id="section-2">二. 自定义函数的深入</h4>

<h6 id="section-3">1. 首先先设计一个计算简单的函数</h6>
<p>R语言是统计软件，那么就设计一个函数，能够输出一组值的均值，方差好了。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custome_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Summary.MeanAndSd <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
</span><span class="line">  mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>这样看起来程序已经写好了，但其实是有问题的。我们来测试一下。</p>

<h6 id="n01">2. 生成一组服从$N(0,1)$的随机数用来测试</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> set.seed<span class="p">(</span><span class="m">10</span><span class="p">)</span>	<span class="c1"># 设定种子</span>
</span><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> rnorm<span class="p">(</span><span class="m">20</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">Summary.MeanAndSd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">result <span class="o">&lt;-</span> Summary.MeanAndSd<span class="p">(</span>x<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>运行可以发现，直接调用函数<code>Summary.MeanAndSd</code>函数没有任何输出；即使赋值给<code>result</code>，<code>result</code>也只得到了方差。</p>

<h6 id="return">3. 选择返回值(<code>return</code>函数):</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Summary.MeanAndSd <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
</span><span class="line">  mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>c<span class="p">(</span>mean<span class="p">,</span> sd<span class="p">))</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="o">&gt;</span> Summary.MeanAndSd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.06053267</span>  <span class="m">0.79990931</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这次就可以得到输出，赋值给<code>result</code>也就可以成功了。下面我们来将程序加一个功能，那就是计算置信区间。</p>

<h6 id="section-4">4. 函数参数：</h6>
<p>计算置信区间，那就需要知道置信度$\alpha$的大小。这个时候函数就必须能够接受参数：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Summary.MeanAndSd <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">,</span> alpha<span class="p">)</span> <span class="p">{</span>
</span><span class="line">  mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  upper <span class="o">&lt;-</span> <span class="m">1</span> <span class="o">-</span> alpha<span class="o">/</span><span class="m">2</span>
</span><span class="line">  ci <span class="o">&lt;-</span> mean <span class="o">+</span> c<span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> qnorm<span class="p">(</span>alpha<span class="o">/</span><span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span><span class="o">*</span>sd<span class="o">/</span>sqrt<span class="p">(</span>length<span class="p">(</span>x<span class="p">))</span> <span class="c1"># qnorm计算正态分布的分位数</span>
</span><span class="line">
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>mean <span class="o">=</span> mean<span class="p">,</span> sd <span class="o">=</span> sd<span class="p">,</span> ci <span class="o">=</span> ci<span class="p">))</span> <span class="c1"># 使用列表输出结果是常用方式</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line">Summary.MeanAndSd<span class="p">(</span>x<span class="p">,</span> <span class="m">0.05</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>运行上面的程序能够很轻松地得到结果。但是，如果我们运行<code>Summary.MeanAndSd(x)</code>，程序就会报错，它会提醒你没有键入<code>alpha</code>。但实际上，大部分默认情况下，$\alpha=0.05$，完全可以将其设定成默认值：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Summary.MeanAndSd <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">,</span> alpha<span class="o">=</span><span class="m">0.05</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  upper <span class="o">&lt;-</span> <span class="m">1</span> <span class="o">-</span> alpha<span class="o">/</span><span class="m">2</span>
</span><span class="line">  ci <span class="o">&lt;-</span> mean <span class="o">+</span> c<span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> qnorm<span class="p">(</span>alpha<span class="o">/</span><span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span><span class="o">*</span>sd<span class="o">/</span>sqrt<span class="p">(</span>length<span class="p">(</span>x<span class="p">))</span> <span class="c1"># qnorm计算正态分布的分位数</span>
</span><span class="line">
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>mean <span class="o">=</span> mean<span class="p">,</span> sd <span class="o">=</span> sd<span class="p">,</span> ci <span class="o">=</span> ci<span class="p">))</span> <span class="c1"># 使用列表输出结果是常用方式</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这回再运行<code>Summary.MeanAndSd(x)</code>可以发现没有问题了。这里我们选取了列表作为输出的方式，这是一个常用的方式，利于查看保存。</p>

<h6 id="section-5">5. 参数的合法性：</h6>
<p>我们知道$\alpha$是介于$(0,1)$之间的值，而且一般来说，$\alpha&lt;0.5$。但上面的程序并不能够处理这类的问题，当参数不合法时，它依然能够计算出一个结果：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> Summary.MeanAndSd<span class="p">(</span>x<span class="p">,</span> <span class="m">1.5</span><span class="p">)</span>
</span><span class="line"><span class="o">$</span>mean
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.06053267</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>sd
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.7999093</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>ci
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.18117539</span>  <span class="m">0.06011005</span>
</span><span class="line">
</span><span class="line"><span class="o">&gt;</span> Summary.MeanAndSd<span class="p">(</span>x<span class="p">,</span> <span class="m">0.8</span><span class="p">)</span>
</span><span class="line"><span class="o">$</span>mean
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.06053267</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>sd
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.7999093</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>ci
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.0152177</span> <span class="m">-0.1058476</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这样的结果显然是不合理的，函数并不具备一定的报错能力。对于用户不合法的输入参数，程序要能够及时停止程序的运行，并且告诉用户哪里错了。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Summary.MeanAndSd <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">,</span> alpha<span class="o">=</span><span class="m">0.05</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">if</span> <span class="p">(</span>alpha <span class="o">&lt;=</span> <span class="m">0</span> <span class="o">||</span> alpha <span class="o">&gt;=</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    stop<span class="p">(</span><span class="s">&quot;The argument &#39;alpha&#39; should be between 0 and 1!&quot;</span> <span class="p">)</span>
</span><span class="line">  <span class="p">}</span> <span class="kr">else</span> <span class="kr">if</span> <span class="p">(</span>alpha <span class="o">&gt;</span> <span class="m">0.5</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    warning<span class="p">(</span><span class="s">&quot;The argument &#39;alpha&#39; is often smaller than 0.5 and  close to 0!&quot;</span><span class="p">)</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">  upper <span class="o">&lt;-</span> <span class="m">1</span> <span class="o">-</span> alpha<span class="o">/</span><span class="m">2</span>
</span><span class="line">  ci <span class="o">&lt;-</span> mean <span class="o">+</span> c<span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> qnorm<span class="p">(</span>alpha<span class="o">/</span><span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span><span class="o">*</span>sd<span class="o">/</span>sqrt<span class="p">(</span>length<span class="p">(</span>x<span class="p">))</span> <span class="c1"># qnorm计算正态分布的分位数</span>
</span><span class="line">
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>mean <span class="o">=</span> mean<span class="p">,</span> sd <span class="o">=</span> sd<span class="p">,</span> ci <span class="o">=</span> ci<span class="p">))</span> <span class="c1"># 使用列表输出结果是常用方式</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>运行一下：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> Summary.MeanAndSd<span class="p">(</span>x<span class="p">,</span> <span class="m">1.5</span><span class="p">)</span>
</span><span class="line">Error <span class="kr">in</span> Summary.MeanAndSd<span class="p">(</span>x<span class="p">,</span> <span class="m">1.5</span><span class="p">)</span> <span class="o">:</span>
</span><span class="line">  The argument <span class="s">&#39;alpha&#39;</span> should be between <span class="m">0</span> and <span class="m">1</span><span class="o">!</span>
</span><span class="line"><span class="o">&gt;</span> Summary.MeanAndSd<span class="p">(</span>x<span class="p">,</span> <span class="m">0.8</span><span class="p">)</span>
</span><span class="line"><span class="o">$</span>mean
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.06053267</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>sd
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.7999093</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>ci
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.0152177</span> <span class="m">-0.1058476</span>
</span><span class="line">
</span><span class="line">Warning message<span class="o">:</span>
</span><span class="line">In Summary.MeanAndSd<span class="p">(</span>x<span class="p">,</span> <span class="m">0.8</span><span class="p">)</span> <span class="o">:</span>
</span><span class="line">  The argument <span class="s">&#39;alpha&#39;</span> is often smaller than <span class="m">0.5</span> and  close to <span class="m">0</span><span class="o">!</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这样程序就具备了一定的稳健性，能够具备一些报错的能力。但是在实际处理数据的时候，往往还会遇到一种情况，那就是缺失值。想想看，上面写的程序能够很好地应付存在缺失值的数据吗？显然是不行的。</p>

<h6 id="section-6">6. 注意缺失值</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># 生成一组具有缺失值的数据</span>
</span><span class="line"><span class="o">&gt;</span> set.seed<span class="p">(</span><span class="m">10</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> y <span class="o">&lt;-</span> rnorm<span class="p">(</span><span class="m">20</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> y <span class="o">&lt;-</span> c<span class="p">(</span>y<span class="p">,</span> <span class="kc">NA</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>试试上面的程序，能否得到结果:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> Summary.MeanAndSd<span class="p">(</span>y<span class="p">)</span>
</span><span class="line"><span class="o">$</span>mean
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">NA</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>sd
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">NA</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>ci
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">NA</span> <span class="kc">NA</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>显然上面的程序无法处理存在缺失值的数据。回想一下，我们之前学过<code>na.rm</code>参数，我们可以通过设定此参数剔除缺失值：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Summary.MeanAndSd <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">,</span> alpha<span class="o">=</span><span class="m">0.05</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">if</span> <span class="p">(</span>alpha <span class="o">&lt;=</span> <span class="m">0</span> <span class="o">||</span> alpha <span class="o">&gt;=</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    stop<span class="p">(</span><span class="s">&quot;The argument &#39;alpha&#39; should be between 0 and 1!&quot;</span> <span class="p">)</span>
</span><span class="line">  <span class="p">}</span> <span class="kr">else</span> <span class="kr">if</span> <span class="p">(</span>alpha <span class="o">&gt;</span> <span class="m">0.5</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    warning<span class="p">(</span><span class="s">&quot;The argument &#39;alpha&#39; is often smaller than 0.5 and  close to 0!&quot;</span><span class="p">)</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="kr">if</span> <span class="p">(</span>any<span class="p">(</span>is.na<span class="p">(</span>y<span class="p">)))</span> <span class="p">{</span>
</span><span class="line">    warning<span class="p">(</span><span class="s">&quot;There are any &#39;NA&#39; in the data, we&#39;ll ignore these datas!&quot;</span><span class="p">)</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">
</span><span class="line">  mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">,</span> na.rm<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span><span class="line">  sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">,</span> na.rm<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span><span class="line">  n <span class="o">&lt;-</span> ifelse<span class="p">(</span>any<span class="p">(</span>is.na<span class="p">(</span>y<span class="p">)),</span> length<span class="p">(</span>x<span class="p">)</span><span class="o">-</span>sum<span class="p">(</span>is.na<span class="p">(</span>x<span class="p">)),</span> length<span class="p">(</span>x<span class="p">))</span> <span class="c1"># n &lt;- length(x)-sum(is.na(x)) 也可以</span>
</span><span class="line">  upper <span class="o">&lt;-</span> <span class="m">1</span> <span class="o">-</span> alpha<span class="o">/</span><span class="m">2</span>
</span><span class="line">  ci <span class="o">&lt;-</span> mean <span class="o">+</span> c<span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> qnorm<span class="p">(</span>alpha<span class="o">/</span><span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span><span class="o">*</span>sd<span class="o">/</span>sqrt<span class="p">(</span>n<span class="p">)</span> <span class="c1"># qnorm计算正态分布的分位数</span>
</span><span class="line">
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>mean <span class="o">=</span> mean<span class="p">,</span> sd <span class="o">=</span> sd<span class="p">,</span> ci <span class="o">=</span> ci<span class="p">))</span> <span class="c1"># 使用列表输出结果是常用方式</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>现在运行一下：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> Summary.MeanAndSd<span class="p">(</span>y<span class="p">)</span>
</span><span class="line"><span class="o">$</span>mean
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-0.06053267</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>sd
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">0.7999093</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>ci
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="m">0.2900366</span> <span class="m">-0.4111019</span>
</span><span class="line">
</span><span class="line">Warning message<span class="o">:</span>
</span><span class="line">In Summary.MeanAndSd<span class="p">(</span>y<span class="p">)</span> <span class="o">:</span>
</span><span class="line">  There are any <span class="s">&#39;NA&#39;</span> <span class="kr">in</span> the data<span class="p">,</span> we<span class="s">&#39;</span><span class="err">ll ignore these datas!</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这样上面的程序就具备了处理缺失值的能力，它能够自动识别数据中是否存在缺失值，如果存在的话就剔除缺失值再进行计算，并且提醒用户存在缺失值。</p>

<p>但其实R语言中存在另外一个方式，可以使得程序具备处理缺失值等等的问题。可以使用使用<code>...</code>参数，使得自定义函数能够接受其它某些函数的参数，想象一下，如果可以这样调用我们的函数，<code>Summary.MeanAndSd(y, na.rm=TRUE)</code>，是不是perfect。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>custom_function</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Summary.MeanAndSd <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">,</span> alpha<span class="o">=</span><span class="m">0.05</span><span class="p">,</span> <span class="kc">...</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">if</span> <span class="p">(</span>alpha <span class="o">&lt;=</span> <span class="m">0</span> <span class="o">||</span> alpha <span class="o">&gt;=</span> <span class="m">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    stop<span class="p">(</span><span class="s">&quot;The argument &#39;alpha&#39; should be between 0 and 1!&quot;</span> <span class="p">)</span>
</span><span class="line">  <span class="p">}</span> <span class="kr">else</span> <span class="kr">if</span> <span class="p">(</span>alpha <span class="o">&gt;</span> <span class="m">0.5</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    warning<span class="p">(</span><span class="s">&quot;The argument &#39;alpha&#39; is often smaller than 0.5 and  close to 0!&quot;</span><span class="p">)</span>
</span><span class="line">  <span class="p">}</span>
</span><span class="line">  <span class="c1"># ellipsis.arguments &lt;- list(...)</span>
</span><span class="line">
</span><span class="line">  mean <span class="o">&lt;-</span> mean<span class="p">(</span>x<span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
</span><span class="line">  sd <span class="o">&lt;-</span> sd<span class="p">(</span>x<span class="p">,</span> <span class="kc">...</span><span class="p">)</span>
</span><span class="line">  n <span class="o">&lt;-</span> ifelse<span class="p">(</span>any<span class="p">(</span>is.na<span class="p">(</span>y<span class="p">)),</span> length<span class="p">(</span>x<span class="p">)</span><span class="o">-</span>sum<span class="p">(</span>is.na<span class="p">(</span>x<span class="p">)),</span> length<span class="p">(</span>x<span class="p">))</span>
</span><span class="line">  upper <span class="o">&lt;-</span> <span class="m">1</span> <span class="o">-</span> alpha<span class="o">/</span><span class="m">2</span>
</span><span class="line">  ci <span class="o">&lt;-</span> mean <span class="o">+</span> c<span class="p">(</span><span class="m">-1</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">*</span> qnorm<span class="p">(</span>alpha<span class="o">/</span><span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span><span class="o">*</span>sd<span class="o">/</span>sqrt<span class="p">(</span>n<span class="p">)</span> <span class="c1"># qnorm计算正态分布的分位数</span>
</span><span class="line">
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>list<span class="p">(</span>mean <span class="o">=</span> mean<span class="p">,</span> sd <span class="o">=</span> sd<span class="p">,</span> ci <span class="o">=</span> ci<span class="p">))</span> <span class="c1"># 使用列表输出结果是常用方式</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>这样就可以直接使用<code>Summary.MeanAndSd(y, na.rm=TRUE)</code>来计算了。</p>

<h6 id="section-7">7. 递归函数</h6>
<p>递归函数即自调用函数，有些时候我们会使用到，这里举个例子：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Recall_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">plusFun1 <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>ifelse<span class="p">(</span>x <span class="o">&lt;</span> <span class="m">10</span><span class="p">,</span> plusFun<span class="p">(</span>x <span class="o">+</span> <span class="m">1</span><span class="p">),</span> x<span class="p">))</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>当然也可以使用R的内置函数<code>Recall</code>：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Recall_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">plusFun2 <span class="o">&lt;-</span> <span class="kr">function</span> <span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
</span><span class="line">  <span class="kr">return</span><span class="p">(</span>ifelse<span class="p">(</span>x <span class="o">&lt;</span> <span class="m">10</span><span class="p">,</span> Recall<span class="p">(</span>x<span class="m">+1</span><span class="p">),</span> x<span class="p">))</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-8">三. 小结</h4>
<p>今天讲了如何在R语言里面构造一个稳健的函数，以及<code>ifelse</code>和<code>Recall</code>函数的使用。写完这些，基本上R语言的基础就结束了。下面就开始写如何使用R语言去解决统计问题。由于我是概率统计专业的，而且是数学系出生，所以写的东西会有不少的理论。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R语言记录3:数据的导入及复杂操作]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/09/rseries3/"/>
    <updated>2014-03-09T11:16:58+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/09/rseries3</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical6.jpg" alt="aritical 6" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>上一节介绍了R语言中常用的数据类型，并且介绍了R语言中对数据的一些简单操作，如创建查看向量或者矩阵等等。今天就介绍一下如何从文件中导入数据，以及对数据进行一些较为复杂的操作。</p>

<h4 id="section">一. 读取数据</h4>

<p>R语言读取数据有很多方式，如<code>scan</code>函数，<code>read.table</code>函数等等。我这里还想介绍另外两个函数，<code>read.csv</code>和<code>read.delim</code>函数，因为处理数据，大部分时候遇到的文件是csv文件或者txt文件，而这两个函数可以很好的读取此类型的文件。</p>

<h5 id="scan">1. <code>scan</code>函数</h5>
<p>首先简单说说<code>scan</code>函数，这个函数在默认的情况下，希望所有输入的数据都是数值型的。<code>scan</code>函数读取的数据必须是同一模式的，如果没有指定参数，scan将从R控制台读取数据，直到遇到一个空白行停止。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> scan<span class="p">()</span>
</span><span class="line"><span class="m">1</span><span class="o">:</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span>
</span><span class="line"><span class="m">4</span><span class="o">:</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span>
</span><span class="line"><span class="m">7</span><span class="o">:</span>
</span><span class="line">Read <span class="m">6</span> items
</span><span class="line"><span class="o">&gt;</span> x
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>也可以通过设定参数，设定读取的数据类型：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> y <span class="o">&lt;-</span> scan<span class="p">(</span>what<span class="o">=</span><span class="s">&quot;&quot;</span><span class="p">)</span> <span class="c1"># 读取字符型数据</span>
</span><span class="line"><span class="m">1</span><span class="o">:</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span>
</span><span class="line"><span class="m">4</span><span class="o">:</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span>
</span><span class="line"><span class="m">7</span><span class="o">:</span>
</span><span class="line">Read <span class="m">6</span> items
</span><span class="line"><span class="o">&gt;</span> y
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;1&quot;</span> <span class="s">&quot;2&quot;</span> <span class="s">&quot;3&quot;</span> <span class="s">&quot;2&quot;</span> <span class="s">&quot;3&quot;</span> <span class="s">&quot;4&quot;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>也可以直接读取一个同一模式的数据文件：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> z <span class="o">&lt;-</span> scan<span class="p">(</span><span class="s">&quot;example.txt&quot;</span><span class="p">)</span>
</span><span class="line">Read <span class="m">9</span> items
</span><span class="line"><span class="o">&gt;</span> z
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">8</span> <span class="m">9</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>其中<code>example.txt</code>的内容如下：</p>

<pre><code>1	2	3
4	5	6
7	8	9
</code></pre>

<p>注意最后留一个空白行，以便R读取数据时可以找到终止位置(否则会出现<code>warning</code>)。</p>

<h5 id="readtable">2. <code>read.table</code>函数</h5>
<p>顾名思义，<code>read.table</code>函数即是以<strong>数据框</strong>的格式在R中读取数据。这里就涉及到一个新的概念，<strong>数据框</strong>。前一节我们提到过，可以使用列表和数据框去存储具有不同模式的数据。<strong>数据框</strong>可以存储具有相同长度的变量，并且在统计中，其每一行就是样本的一个观测值，有多少行就有多少次观测。我们可以使用<code>data.frame</code>函数来生成一个数据框：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> name <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;Li&quot;</span><span class="p">,</span> <span class="s">&quot;Wang&quot;</span><span class="p">,</span> <span class="s">&quot;Sun&quot;</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> age <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">21</span><span class="p">,</span> <span class="m">22</span><span class="p">,</span> <span class="m">23</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> Datafr <span class="o">&lt;-</span> data.frame<span class="p">(</span>name <span class="o">=</span> name<span class="p">,</span> age <span class="o">=</span> age<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> Datafr
</span><span class="line">  name age
</span><span class="line"><span class="m">1</span>   Li  <span class="m">21</span>
</span><span class="line"><span class="m">2</span> Wang  <span class="m">22</span>
</span><span class="line"><span class="m">3</span>  Sun  <span class="m">23</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>此外，数据框还有一个优点：可以在不影响原始数据的情况下，改变数据。比如我想知道，数据里面每个人的年龄比18大多少：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> Datafr2 <span class="o">&lt;-</span> data.frame<span class="p">(</span>name <span class="o">=</span> name<span class="p">,</span> age <span class="o">=</span> age<span class="p">,</span> age.u <span class="o">=</span> age<span class="m">-18</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> Datafr2
</span><span class="line">  name age age.u
</span><span class="line"><span class="m">1</span>   Li  <span class="m">21</span>     <span class="m">3</span>
</span><span class="line"><span class="m">2</span> Wang  <span class="m">22</span>     <span class="m">4</span>
</span><span class="line"><span class="m">3</span>  Sun  <span class="m">23</span>     <span class="m">5</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>那么如何使用<code>read.table</code>函数呢，看看如下示例：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> example <span class="o">&lt;-</span> read.table<span class="p">(</span><span class="s">&quot;example.txt&quot;</span><span class="p">,</span> header<span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> example
</span><span class="line">  V1 V2 V3
</span><span class="line"><span class="m">1</span>  <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>
</span><span class="line"><span class="m">2</span>  <span class="m">4</span>  <span class="m">5</span>  <span class="m">6</span>
</span><span class="line"><span class="m">3</span>  <span class="m">7</span>  <span class="m">8</span>  <span class="m">9</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>其中<code>header</code>参数指定数据文件的第一行是否为变量名。当没有变量名时，可以使用参数<code>col.names</code>来指定：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> example <span class="o">&lt;-</span> read.table<span class="p">(</span><span class="s">&quot;example.txt&quot;</span><span class="p">,</span> header<span class="o">=</span><span class="kc">FALSE</span><span class="p">,</span> col.names<span class="o">=</span>c<span class="p">(</span><span class="s">&quot;x1&quot;</span><span class="p">,</span> <span class="s">&quot;x2&quot;</span><span class="p">,</span> <span class="s">&quot;x3&quot;</span><span class="p">))</span>
</span><span class="line"><span class="o">&gt;</span> example
</span><span class="line">  x1 x2 x3
</span><span class="line"><span class="m">1</span>  <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>
</span><span class="line"><span class="m">2</span>  <span class="m">4</span>  <span class="m">5</span>  <span class="m">6</span>
</span><span class="line"><span class="m">3</span>  <span class="m">7</span>  <span class="m">8</span>  <span class="m">9</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>当然<code>read.table</code>函数读取数据时，可以使用<code>sep=参数</code>指定分隔符。这些可以使用<code>?read.table</code>查看。</p>

<h5 id="readcsvreaddelim">3. <code>read.csv</code>和<code>read.delim</code>函数</h5>

<p>使用方法与<code>read.table</code>函数类似，可以直接读取csv文件和txt文件。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>loadData</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">dataCsv <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;example.csv&quot;</span><span class="p">,</span> header<span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
</span><span class="line">dataTxt <span class="o">&lt;-</span> read.delim<span class="p">(</span><span class="s">&quot;example.txt&quot;</span><span class="p">,</span> header<span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-1">二. 数据操作</h4>
<p>上一节介绍了一些简单的数据操作，这次讲一讲较为复杂的数据操作。</p>

<h6 id="sample">1. 首先从$-5$到$5$中随机取出不重复的$10$个数据(<code>sample</code>函数)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> sample<span class="p">(</span><span class="m">-5</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> y <span class="o">&lt;-</span> sample<span class="p">(</span><span class="m">-5</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">10</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> x
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-2</span>  <span class="m">3</span> <span class="m">-3</span>  <span class="m">0</span> <span class="m">-5</span>  <span class="m">5</span>  <span class="m">1</span>  <span class="m">4</span> <span class="m">-1</span>  <span class="m">2</span>
</span><span class="line"><span class="o">&gt;</span> y
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-1</span>  <span class="m">3</span> <span class="m">-3</span>  <span class="m">1</span> <span class="m">-4</span>  <span class="m">5</span>  <span class="m">0</span>  <span class="m">2</span> <span class="m">-5</span> <span class="m">-2</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="x0allany">2. 判断$x$中的数据是否大于$0$(<code>all</code>和<code>any</code>函数)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x<span class="o">&gt;</span><span class="m">0</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>
</span><span class="line"><span class="o">&gt;</span> all<span class="p">(</span>x<span class="o">&gt;</span><span class="m">0</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span>
</span><span class="line"><span class="o">&gt;</span> any<span class="p">(</span>x<span class="o">&gt;</span><span class="m">0</span><span class="p">)</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">TRUE</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="section-2">3. 试试更多的逻辑运算(<code>&amp;, |, !</code>)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x <span class="o">&gt;</span> <span class="m">0</span> <span class="o">&amp;</span> y <span class="o">&gt;</span> <span class="m">0</span>
</span><span class="line">	 <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>
</span><span class="line"><span class="o">&gt;</span> x <span class="o">&gt;</span> <span class="m">0</span> <span class="o">|</span> y <span class="o">&gt;</span> <span class="m">0</span>
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>
</span><span class="line"><span class="o">&gt;</span> <span class="o">!</span><span class="p">(</span>x<span class="o">&gt;</span><span class="m">0</span><span class="p">)</span>
</span><span class="line">	 <span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="xywhich">4. 找出$x$与$y$相等的元素(<code>which</code>函数):</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x <span class="o">==</span> y
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>  <span class="kc">TRUE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span> <span class="kc">FALSE</span>
</span><span class="line"><span class="o">&gt;</span> which<span class="p">(</span>x <span class="o">==</span> y<span class="p">)</span> <span class="c1"># 取出满足条件的位置</span>
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span> <span class="m">3</span> <span class="m">6</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="sample-1">5. 从$-5$到$5$中随机取出允许重复的$10$个数据(<code>sample</code>函数)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> z <span class="o">&lt;-</span> sample<span class="p">(</span><span class="m">-5</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> replace<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> z
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="m">4</span> <span class="m">-4</span> <span class="m">-1</span> <span class="m">-2</span>  <span class="m">4</span>  <span class="m">5</span> <span class="m">-3</span> <span class="m">-3</span>  <span class="m">1</span>  <span class="m">2</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="zunique">6. 取出$z$中不同的元素(<code>unique</code>函数)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> z.unique <span class="o">&lt;-</span> unique<span class="p">(</span>z<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> z.unique
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="m">4</span> <span class="m">-4</span> <span class="m">-1</span> <span class="m">-2</span>  <span class="m">5</span> <span class="m">-3</span>  <span class="m">1</span>  <span class="m">2</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="na">7. 生成存在缺失数据的一列数据(<code>NA</code>)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x.na <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="kc">NA</span><span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">5</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> x.na
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>  <span class="m">4</span>  <span class="m">5</span> <span class="kc">NA</span>  <span class="m">2</span> <span class="kc">NA</span>  <span class="m">3</span>  <span class="m">4</span>  <span class="m">5</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="xisna">8. 对$x$求和(<code>is.na</code>函数):</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> sum<span class="p">(</span>x.na<span class="p">)</span> <span class="c1"># 带着缺失数据计算</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="kc">NA</span>
</span><span class="line"><span class="o">&gt;</span> sum<span class="p">(</span>is.na<span class="p">(</span>x.na<span class="p">))</span> <span class="c1"># 统计缺失数据的个数</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span>
</span><span class="line"><span class="o">&gt;</span> sum<span class="p">(</span>x.na<span class="p">,</span> na.rm<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span> <span class="c1"># 剔除缺失数据后求和</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">29</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="xappend">9. 向变量$x$中添加数据(<code>append</code>函数)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> append<span class="p">(</span>x<span class="p">,</span> sample<span class="p">(</span><span class="m">-5</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">2</span><span class="p">))</span>
</span><span class="line"><span class="o">&gt;</span> x
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">-2</span>  <span class="m">3</span> <span class="m">-3</span>  <span class="m">0</span> <span class="m">-5</span>  <span class="m">5</span>  <span class="m">1</span>  <span class="m">4</span> <span class="m">-1</span>  <span class="m">2</span> <span class="m">-1</span> <span class="m">-5</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="xascharacterasfactorasnumeric">10. 更改$x$的数据类型(<code>as.character</code>,<code>as.factor</code>,<code>as.numeric</code>函数)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> as.character<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> x
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="s">&quot;2&quot;</span>  <span class="s">&quot;8&quot;</span>  <span class="s">&quot;3&quot;</span>  <span class="s">&quot;5&quot;</span>  <span class="s">&quot;4&quot;</span>  <span class="s">&quot;10&quot;</span> <span class="s">&quot;6&quot;</span>  <span class="s">&quot;9&quot;</span>  <span class="s">&quot;1&quot;</span>  <span class="s">&quot;7&quot;</span>  <span class="s">&quot;1&quot;</span>  <span class="s">&quot;4&quot;</span>
</span><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> as.factor<span class="p">(</span>x<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> x
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span>  <span class="m">8</span>  <span class="m">3</span>  <span class="m">5</span>  <span class="m">4</span>  <span class="m">10</span> <span class="m">6</span>  <span class="m">9</span>  <span class="m">1</span>  <span class="m">7</span>  <span class="m">1</span>  <span class="m">4</span>
</span><span class="line">Levels<span class="o">:</span> <span class="m">1</span> <span class="m">10</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span> <span class="m">8</span> <span class="m">9</span>
</span><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> as.numeric<span class="p">(</span>as.character<span class="p">(</span>x<span class="p">))</span> <span class="c1"># 如果一组因子变量是用数字表示，一般先将数字因子转换成字符后再转换成数值。</span>
</span><span class="line"><span class="o">&gt;</span> x
</span><span class="line"> <span class="p">[</span><span class="m">1</span><span class="p">]</span>  <span class="m">2</span>  <span class="m">8</span>  <span class="m">3</span>  <span class="m">5</span>  <span class="m">4</span> <span class="m">10</span>  <span class="m">6</span>  <span class="m">9</span>  <span class="m">1</span>  <span class="m">7</span>  <span class="m">1</span>  <span class="m">4</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="unlistasdataframe">11. 数据类型更改(<code>unlist</code>,<code>as.data.frame</code>)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> myList <span class="o">&lt;-</span> list<span class="p">()</span>
</span><span class="line"><span class="o">&gt;</span> myList<span class="o">$</span>x1 <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> myList<span class="o">$</span>x2 <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> myList
</span><span class="line"><span class="o">$</span>x1
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span>
</span><span class="line">
</span><span class="line"><span class="o">$</span>x2
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">2</span> <span class="m">4</span> <span class="m">6</span>
</span><span class="line">
</span><span class="line"><span class="c1"># unlist</span>
</span><span class="line"><span class="o">&gt;</span> uList <span class="o">&lt;-</span> unlist<span class="p">(</span>myList<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> uList
</span><span class="line">x11 x12 x13 x21 x22 x23
</span><span class="line">  <span class="m">1</span>   <span class="m">2</span>   <span class="m">3</span>   <span class="m">2</span>   <span class="m">4</span>   <span class="m">6</span>
</span><span class="line">
</span><span class="line"><span class="c1"># matrix</span>
</span><span class="line"><span class="o">&gt;</span> mList <span class="o">&lt;-</span> matrix<span class="p">(</span>uList<span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> byrow<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> mList
</span><span class="line">     <span class="p">[,</span><span class="m">1</span><span class="p">]</span> <span class="p">[,</span><span class="m">2</span><span class="p">]</span> <span class="p">[,</span><span class="m">3</span><span class="p">]</span>
</span><span class="line"><span class="p">[</span><span class="m">1</span><span class="p">,]</span>    <span class="m">1</span>    <span class="m">2</span>    <span class="m">3</span>
</span><span class="line"><span class="p">[</span><span class="m">2</span><span class="p">,]</span>    <span class="m">2</span>    <span class="m">4</span>    <span class="m">6</span>
</span><span class="line">
</span><span class="line"><span class="c1"># dataframe</span>
</span><span class="line"><span class="o">&gt;</span> dfList <span class="o">&lt;-</span> as.data.frame<span class="p">(</span>mList<span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> dfList
</span><span class="line">  V1 V2 V3
</span><span class="line"><span class="m">1</span>  <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>
</span><span class="line"><span class="m">2</span>  <span class="m">2</span>  <span class="m">4</span>  <span class="m">6</span>
</span><span class="line"><span class="o">&gt;</span> colnames<span class="p">(</span>dfList<span class="p">)</span> <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;x1&quot;</span><span class="p">,</span> <span class="s">&quot;x2&quot;</span><span class="p">,</span> <span class="s">&quot;x3&quot;</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> dfList
</span><span class="line">  x1 x2 x3
</span><span class="line"><span class="m">1</span>  <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>
</span><span class="line"><span class="m">2</span>  <span class="m">2</span>  <span class="m">4</span>  <span class="m">6</span>
</span><span class="line"><span class="o">&gt;</span> rownames<span class="p">(</span>dfList<span class="p">)</span> <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;o1&quot;</span><span class="p">,</span> <span class="s">&quot;o2&quot;</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> dfList
</span><span class="line">   x1 x2 x3
</span><span class="line">o1  <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>
</span><span class="line">o2  <span class="m">2</span>  <span class="m">4</span>  <span class="m">6</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="tabletapplybyaggregate">12. 按条件整理计算数据(<code>table</code>,<code>tapply</code>,<code>by</code>,<code>aggregate</code>函数)：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>dataManipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="o">&gt;</span> x <span class="o">&lt;-</span> list<span class="p">()</span>
</span><span class="line"><span class="o">&gt;</span> x<span class="o">$</span>a <span class="o">&lt;-</span> sample<span class="p">(</span><span class="m">-10</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> replace<span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</span><span class="line"><span class="o">&gt;</span> x<span class="o">$</span>b <span class="o">&lt;-</span> as.factor<span class="p">(</span>sample<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> replace<span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</span><span class="line"><span class="o">&gt;</span> x<span class="o">$</span>c <span class="o">&lt;-</span> as.factor<span class="p">(</span>sample<span class="p">(</span><span class="m">-3</span><span class="o">:</span><span class="m">-1</span><span class="p">,</span> <span class="m">20</span><span class="p">,</span> replace<span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</span><span class="line"><span class="o">&gt;</span> x
</span><span class="line">
</span><span class="line"><span class="c1"># 统计因子出现的频数</span>
</span><span class="line"><span class="o">&gt;</span> table<span class="p">(</span>x<span class="o">$</span>b<span class="p">)</span>
</span><span class="line">
</span><span class="line"> <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>  <span class="m">4</span>
</span><span class="line"> <span class="m">5</span>  <span class="m">3</span>  <span class="m">1</span> <span class="m">11</span>
</span><span class="line"><span class="o">&gt;</span> table<span class="p">(</span>x<span class="o">$</span>c<span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="m">-3</span> <span class="m">-2</span> <span class="m">-1</span>
</span><span class="line"> <span class="m">9</span>  <span class="m">7</span>  <span class="m">4</span>
</span><span class="line"><span class="o">&gt;</span> table<span class="p">(</span>x<span class="o">$</span>b<span class="p">,</span> x<span class="o">$</span>c<span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="m">-3</span> <span class="m">-2</span> <span class="m">-1</span>
</span><span class="line">  <span class="m">1</span>  <span class="m">1</span>  <span class="m">3</span>  <span class="m">1</span>
</span><span class="line">  <span class="m">2</span>  <span class="m">1</span>  <span class="m">2</span>  <span class="m">0</span>
</span><span class="line">  <span class="m">3</span>  <span class="m">0</span>  <span class="m">1</span>  <span class="m">0</span>
</span><span class="line">  <span class="m">4</span>  <span class="m">7</span>  <span class="m">1</span>  <span class="m">3</span>
</span><span class="line">
</span><span class="line"><span class="c1"># 使用tapply，by以及aggregate函数根据不同因子对数据进行计算</span>
</span><span class="line"><span class="o">&gt;</span> tapply<span class="p">(</span>x<span class="o">$</span>a<span class="p">,</span> x<span class="o">$</span>b<span class="p">,</span> sum<span class="p">)</span>
</span><span class="line"> <span class="m">1</span>  <span class="m">2</span>  <span class="m">3</span>  <span class="m">4</span>
</span><span class="line"> <span class="m">8</span> <span class="m">11</span>  <span class="m">2</span> <span class="m">-5</span>
</span><span class="line"><span class="o">&gt;</span> tapply<span class="p">(</span>x<span class="o">$</span>a<span class="p">,</span> x<span class="o">$</span>c<span class="p">,</span> sum<span class="p">)</span>
</span><span class="line"><span class="m">-3</span> <span class="m">-2</span> <span class="m">-1</span>
</span><span class="line"><span class="m">-7</span> <span class="m">16</span>  <span class="m">7</span>
</span><span class="line"><span class="o">&gt;</span> tapply<span class="p">(</span>x<span class="o">$</span>a<span class="p">,</span> list<span class="p">(</span>x<span class="o">$</span>b<span class="p">,</span> x<span class="o">$</span>c<span class="p">),</span> sum<span class="p">)</span> <span class="c1"># 可以看到，由于b=2且c=-1的数据不存在，所有计算结果为NA(其它类似)</span>
</span><span class="line">  <span class="m">-3</span> <span class="m">-2</span> <span class="m">-1</span>
</span><span class="line"><span class="m">1</span> <span class="m">-3</span>  <span class="m">6</span>  <span class="m">5</span>
</span><span class="line"><span class="m">2</span>  <span class="m">5</span>  <span class="m">6</span> <span class="kc">NA</span>
</span><span class="line"><span class="m">3</span> <span class="kc">NA</span>  <span class="m">2</span> <span class="kc">NA</span>
</span><span class="line"><span class="m">4</span> <span class="m">-9</span>  <span class="m">2</span>  <span class="m">2</span>
</span><span class="line">
</span><span class="line"><span class="o">&gt;</span> by<span class="p">(</span>x<span class="o">$</span>a<span class="p">,</span> list<span class="p">(</span>x<span class="o">$</span>b<span class="p">,</span> x<span class="o">$</span>c<span class="p">),</span> sum<span class="p">)</span> <span class="c1"># 输出结果太长就不给出了，可以观察一下与tapply输出的区别</span>
</span><span class="line">
</span><span class="line"><span class="o">&gt;</span> aggregate<span class="p">(</span>a <span class="o">~</span> b<span class="o">+</span>c<span class="p">,</span> x<span class="p">,</span> sum<span class="p">)</span> <span class="c1"># 第一个参数为要计算的量，中间的参数为条件，第三个参数为数据集名称，最后一个为函数</span>
</span><span class="line">  b  c  a
</span><span class="line"><span class="m">1</span> <span class="m">1</span> <span class="m">-3</span> <span class="m">-3</span>
</span><span class="line"><span class="m">2</span> <span class="m">2</span> <span class="m">-3</span>  <span class="m">5</span>
</span><span class="line"><span class="m">3</span> <span class="m">4</span> <span class="m">-3</span> <span class="m">-9</span>
</span><span class="line"><span class="m">4</span> <span class="m">1</span> <span class="m">-2</span>  <span class="m">6</span>
</span><span class="line"><span class="m">5</span> <span class="m">2</span> <span class="m">-2</span>  <span class="m">6</span>
</span><span class="line"><span class="m">6</span> <span class="m">3</span> <span class="m">-2</span>  <span class="m">2</span>
</span><span class="line"><span class="m">7</span> <span class="m">4</span> <span class="m">-2</span>  <span class="m">2</span>
</span><span class="line"><span class="m">8</span> <span class="m">1</span> <span class="m">-1</span>  <span class="m">5</span>
</span><span class="line"><span class="m">9</span> <span class="m">4</span> <span class="m">-1</span>  <span class="m">2</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-3">三. 小节</h4>
<p>这次我们介绍了R语言如何从外部读取数据，以及对得到的数据如何进行一些复杂点的操作。当然这还不是全部，比如我这里还没有讲到如何将数据集按行按列去进行合并(<code>rbind</code>,<code>cbind</code>函数)等等，这些都可以通过help文档得到。我觉得学习一门语言一定要学会使用<code>help</code>，还有善用Google很重要。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R语言记录2 ：R语言中的数据]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/07/rseries2/"/>
    <updated>2014-03-07T17:03:58+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/07/rseries2</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical5.jpg" alt="aritical 5" />
<!-- more --></p>

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>上一次简单地讲了一下R语言编程的一些控制语句，这次来看一看R中的数据。</p>

<h4 id="section">一. 数据类型简介</h4>

<p>首先，要记住，R语言中的一切都是对象，<code>Everything in R is an Object</code>。那么对象就存在其属性，R中每一个对象包含多个属性用来描述该对象。最重要的两个属性是<strong>模式</strong>和<strong>类</strong>。可以使用函数<code>mode()</code>和函数<code>class()</code>去查看对象的模式和类。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>datamode</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># 比如查看函数sum的模式和类</span>
</span><span class="line">mode<span class="p">(</span>sum<span class="p">)</span>	<span class="c1"># function</span>
</span><span class="line">class<span class="p">(</span>sum<span class="p">)</span>	<span class="c1"># function</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>我们用R语言来处理数据，遇到的最多的对象模式应该是<em>数值型</em>，<em>字符型</em>，<em>逻辑型</em>，<em>因子</em>和<em>日期时间</em>。而我们正常处理的数据中往往会存在不止一种数据模式，比如一批数据中有变量：姓名和年龄，显然姓名是字符型而年龄是数值型。那么在存储这些变量的时候，就出现一个对象需要对应多个模式。R语言中<strong>像矩阵，数组等等的对象只能存储相同模式的数据；而像数据框，列表等等的对象则可存储多种模式的数据</strong>。</p>

<p>在R中最常遇到的数据模式是<strong><em>列表</em></strong>，因为其可以存储具有不同模式和不同长度的对象。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>datamode</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">create.list <span class="o">&lt;-</span> list<span class="p">(</span>name <span class="o">=</span> c<span class="p">(</span><span class="s">&quot;Li&quot;</span><span class="p">,</span> <span class="s">&quot;Wang&quot;</span><span class="p">,</span><span class="s">&quot; Xue&quot;</span><span class="p">),</span> age <span class="o">=</span> c<span class="p">(</span><span class="m">21</span><span class="p">,</span> <span class="m">22</span><span class="p">,</span> <span class="m">24</span><span class="p">),</span> sex <span class="o">=</span> factor<span class="p">(</span><span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;g&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">))</span>
</span><span class="line"><span class="c1"># 使用sapply查看模式和类（回想上一节内容）</span>
</span><span class="line">sapply<span class="p">(</span>create.list<span class="p">,</span> mode<span class="p">)</span>
</span><span class="line">sapply<span class="p">(</span>create.list<span class="p">,</span> class<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-1">二. 简单的数据操作</h4>

<h6 id="r">1. 进入R程序，更改工作空间：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>data_manipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># 获取当前的路径</span>
</span><span class="line">getwd<span class="p">()</span>
</span><span class="line"><span class="c1"># 更改到目标路径</span>
</span><span class="line">setwd<span class="p">(</span><span class="s">&quot;~/DataInR&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="section-2">2. 向量</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>data_manipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># c函数：连接或合并数据</span>
</span><span class="line">x <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span><span class="line">y <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">,</span> <span class="s">&quot;bc&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line"><span class="c1"># 使用seq函数创建数据</span>
</span><span class="line">z <span class="o">&lt;-</span> seq<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">21</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="c1"># 或 z &lt;- 1:21</span>
</span><span class="line">
</span><span class="line"><span class="c1"># 查看数据</span>
</span><span class="line">head<span class="p">(</span>z<span class="p">)</span>
</span><span class="line">tail<span class="p">(</span>z<span class="p">)</span>
</span><span class="line">head<span class="p">(</span>z<span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span><span class="line">tail<span class="p">(</span>z<span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span><span class="line">nchar<span class="p">(</span>y<span class="p">)</span> <span class="c1"># 注意空格</span>
</span><span class="line">z<span class="p">[</span><span class="m">1</span><span class="p">]</span>
</span><span class="line">z<span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">]</span>
</span><span class="line">
</span><span class="line"><span class="c1"># 合并数据</span>
</span><span class="line">mode<span class="p">(</span>x<span class="p">)</span>
</span><span class="line">mode<span class="p">(</span>y<span class="p">)</span>
</span><span class="line">xy <span class="o">&lt;-</span> c<span class="p">(</span>x<span class="p">,</span> y<span class="p">)</span>
</span><span class="line">mode<span class="p">(</span>xy<span class="p">)</span>
</span><span class="line"><span class="c1">## c函数合并不同模式的数据：logical &lt; integer &lt; numeric &lt; complex &lt; character &lt; list</span>
</span><span class="line"><span class="c1">## 当级别低的遇到级别高的，则转为级别高的</span>
</span><span class="line"><span class="c1">## 比如logical与integer合并，则logical类型中TRUE转成1，FALSE转成0，全部转成integer</span>
</span><span class="line">
</span><span class="line"><span class="c1"># 简单运算</span>
</span><span class="line">z <span class="o">+</span> <span class="m">1</span>
</span><span class="line">z <span class="o">+</span> x <span class="c1"># 注意长度不同</span>
</span><span class="line">k <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">20</span>
</span><span class="line">z <span class="o">+</span> k <span class="c1"># 注意warning</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="section-3">3. 矩阵</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>data_manipulation</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># 创建矩阵</span>
</span><span class="line">v <span class="o">&lt;-</span> <span class="m">1</span><span class="o">:</span><span class="m">12</span>
</span><span class="line">m <span class="o">&lt;-</span> matrix<span class="p">(</span>v<span class="p">,</span> nrow <span class="o">=</span> <span class="m">3</span><span class="p">,</span> ncol <span class="o">=</span> <span class="m">4</span><span class="p">)</span>
</span><span class="line">m1 <span class="o">&lt;-</span> matrix<span class="p">(</span>v<span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
</span><span class="line">m2 <span class="o">&lt;-</span> matrix<span class="p">(</span>v<span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span><span class="line">m3 <span class="o">&lt;-</span> matrix<span class="p">(</span>v<span class="p">,</span> <span class="m">4</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">m4 <span class="o">&lt;-</span> matrix<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span> <span class="c1"># 创建零矩阵</span>
</span><span class="line">m5 <span class="o">&lt;-</span> matrix<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span> <span class="c1"># 全一矩阵</span>
</span><span class="line">m6 <span class="o">&lt;-</span> matrix<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span> <span class="c1"># 行相同矩阵</span>
</span><span class="line">m7 <span class="o">&lt;-</span> matrix<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span> <span class="c1"># 列相同矩阵</span>
</span><span class="line">m8 <span class="o">&lt;-</span> matrix<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span> <span class="c1"># 注意warning</span>
</span><span class="line">
</span><span class="line"><span class="c1"># 查看数据</span>
</span><span class="line">m<span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">]</span>
</span><span class="line">m<span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">,</span> <span class="m">3</span><span class="o">:</span><span class="m">4</span><span class="p">]</span>
</span><span class="line">dim<span class="p">(</span>m<span class="p">)</span>
</span><span class="line">length<span class="p">(</span>m<span class="p">)</span>
</span><span class="line">head<span class="p">(</span>m<span class="p">,</span> <span class="m">2</span><span class="p">)</span>
</span><span class="line">tail<span class="p">(</span>m<span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>#### 三. 小节	 
到此为止，我们就可以在R语言中创建录入一些数据，并对数据进行一些简单的操作。利用上一节中所讲的控制语句，我们就可以编写R语言的小程序了。试试用R语言解决一些你在学习中遇到的小问题吧。下一次我将讲讲如何从文件中导入数据，以及一些其他的处理。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[R语言记录1 ：基础]]></title>
    <link href="http://jackycode.github.io/blog/2014/03/06/rseries1/"/>
    <updated>2014-03-06T15:27:28+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/03/06/rseries1</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical4.jpg" alt="aritical 4" /></p>

<!-- more -->

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<h3 id="section">一. 配置与帮助</h3>

<p>很多时候我们希望软件可以根据我们的需要输出结果，比如我想将所有的结果小数都保留三位，那么就需要自己去更改设置，这时候就需要使用函数：<code>options(...)</code>。这个函数可以用来<strong><em>显示或设置当前的选项</em></strong>。运行<code>options()</code>，可以查看选项当前的设置，<code>help(options)</code>可以显示可用选项的说明。如果想要单独查看某一个设置，则需要使用函数<code>getOption(x, default=NULL)</code>。</p>

<p>可以运行这些代码以查看：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>config_set.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">options<span class="p">()</span>
</span><span class="line">getOption<span class="p">(</span><span class="s">&quot;digits&quot;</span><span class="p">)</span>
</span><span class="line">options<span class="p">(</span>digits<span class="o">=</span><span class="m">3</span><span class="p">)</span>
</span><span class="line">getOption<span class="p">(</span><span class="s">&quot;digits&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>在学习一个软件之前，最重要的是知道在哪里才能获取帮助。R语言提供了强大的帮助系统，提供了已安装包中所有函数的细节、参考文献以及使用示例。以和函数<code>sum()</code>为例，你可以直接输入<code>help(sum)或?sum</code>查看函数<code>sum</code>的帮助，也可以输入<code>help.search(sum)或??sum</code>在本地以关键词<code>sum</code>进行搜索。你甚至可以直接输入<code>sum</code>得到该函数的源代码细节（这对于学习编程来说实在是太棒了）。</p>

<p>试试这些：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>help_use.R</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">help.start<span class="p">()</span> <span class="c1"># 打开帮助文档首页</span>
</span><span class="line"><span class="o">?</span>sum
</span><span class="line"><span class="o">??</span>sum
</span><span class="line">sum<span class="p">()</span>
</span><span class="line">sum
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="section-1">二. 控制语句</h3>

<h4 id="section-2">1. 循环语句</h4>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="kr">for</span> <span class="p">(</span>var <span class="kr">in</span> seq<span class="p">)</span> expr
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>即变量<em>var</em>从<em>seq</em>中依次取值，计算<em>expr</em>直到结束。例如：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>controlSentence_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">x <span class="o">&lt;-</span> c<span class="p">()</span>
</span><span class="line"><span class="kr">for</span> <span class="p">(</span>i <span class="kr">in</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">))</span> x<span class="p">[</span>i<span class="p">]</span><span class="o">&lt;-</span>i<span class="o">*</span>i
</span></code></pre></td></tr></table></div></figure></notextile></div>
<p>当然，R语言也支持<code>while</code>和<code>repeat</code>这类C语言风格的循环：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>controlSentence_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="c1"># while loop</span>
</span><span class="line">i <span class="o">&lt;-</span> <span class="m">1</span>
</span><span class="line"><span class="kr">while</span> <span class="p">(</span>i <span class="o">&lt;=</span> <span class="m">3</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">	x<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> i<span class="o">*</span>i
</span><span class="line">	i <span class="o">&lt;-</span> i<span class="m">+1</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="c1"># another while loop</span>
</span><span class="line">i <span class="o">&lt;-</span> <span class="m">1</span>
</span><span class="line"><span class="kr">while</span> <span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    x<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> i<span class="o">*</span>i
</span><span class="line">    i <span class="o">&lt;-</span> i<span class="m">+1</span>
</span><span class="line">    <span class="kr">if</span> <span class="p">(</span>i <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="kr">break</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="c1"># repeat loop</span>
</span><span class="line">i <span class="o">&lt;-</span> <span class="m">1</span>
</span><span class="line"><span class="kr">repeat</span> <span class="p">{</span>
</span><span class="line">    x<span class="p">[</span>i<span class="p">]</span> <span class="o">&lt;-</span> i<span class="o">*</span>i
</span><span class="line">    i <span class="o">&lt;-</span> i<span class="m">+1</span>
</span><span class="line">    <span class="kr">if</span> <span class="p">(</span>i <span class="o">&gt;</span> <span class="m">3</span><span class="p">)</span> <span class="kr">break</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line"><span class="o">==========================</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h5 id="section-3">非向量集合上的循环</h5>
<p>R语言并不直接支持在非向量结合上做循环，但是我们可以用函数<code>apply()</code>,<code>sapply()</code>,<code>lapply()</code>以及<code>tapply</code>来避开循环得到想要的结果。</p>

<p>比如上面的例子，对集合{1, 2, 3}中每一个元素求平方得到新的集合：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>controlSentence_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">i <span class="o">&lt;-</span> c<span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">)</span>
</span><span class="line">Fun <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
</span><span class="line">	y <span class="o">&lt;-</span> x<span class="o">*</span>x
</span><span class="line"><span class="p">}</span>
</span><span class="line">x <span class="o">&lt;-</span> lapply<span class="p">(</span>i<span class="p">,</span> Fun<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>使用<code>apply()</code>函数，还可以简单地对一个矩阵按行(按列)求和(任意函数)。</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>controlSentence_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">a <span class="o">&lt;-</span> matrix<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">12</span><span class="p">,</span> nrow<span class="o">=</span><span class="m">4</span><span class="p">)</span>
</span><span class="line">b <span class="o">&lt;-</span> apply<span class="p">(</span>a<span class="p">,</span> <span class="m">1</span><span class="p">,</span> sum<span class="p">)</span>
</span><span class="line">c <span class="o">&lt;-</span> apply<span class="p">(</span>a<span class="p">,</span> <span class="m">2</span><span class="p">,</span> sum<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-4">2. 条件语句</h4>

<p>跟C语言类似：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>controlSentence_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">r <span class="o">&lt;-</span> <span class="m">3</span>
</span><span class="line"><span class="kr">if</span> <span class="p">(</span>r <span class="o">==</span> <span class="m">4</span><span class="p">)</span> <span class="p">{</span>
</span><span class="line">    x <span class="o">&lt;-</span> <span class="m">1</span>
</span><span class="line"><span class="p">}</span> <span class="kr">else</span> <span class="p">{</span>
</span><span class="line">    x <span class="o">&lt;-</span> <span class="m">3</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h4 id="section-5">3. 自定义函数</h4>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="r"><span class="line"><span class="kr">function</span> <span class="p">(</span><span class="o">&lt;</span>formal arguments<span class="o">&gt;</span><span class="p">)</span> body
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>使用上面的例子：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>controlSentence_use</span><a href="https://github.com/JackyCode/RSeries">link</a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="r"><span class="line">Fun <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
</span><span class="line">	y <span class="o">&lt;-</span> x<span class="o">*</span>x
</span><span class="line"><span class="p">}</span>
</span><span class="line">a <span class="o">&lt;-</span> <span class="m">2</span>
</span><span class="line">b <span class="o">&lt;-</span> Fun<span class="p">(</span>a<span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>学习这么多之后，我们就可以使用R做点小事情了。但是这还没有涉及到R语言自身的东西，毕竟上面的这些能力哪个编程语言没有。</p>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[记录：Octopress配置修改之旅]]></title>
    <link href="http://jackycode.github.io/blog/2014/02/26/record2/"/>
    <updated>2014-02-26T15:40:39+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/02/26/record2</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical3.jpg" alt="aritical 3" /></p>

<!-- more -->

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>花了两天的时间对主题进行了修改，由于对Web的东西了解的不多，查资料找东西修改代码着实累了一把(丫的，这些代码可读性很强，比起R，Python神马的可是容易学的多。只是要看懂框架还真是需要大大的一番功夫，而且怎么修改CSS做效果，作为门外汉的我是真心欲哭无泪啊)。</p>

<p>本来想把网页做得美观大方简洁，高大上吧反正。最终出来这么个效果，虽说离高大上远了点，但我也就算是满意了，起码它是自己独有的，也算是独一无二了。</p>

<hr />

<p>在修改配置的过程中发现了一些东西，在这里做个小记录。</p>

<h4 id="section">1. 安装第三方主题的结果</h4>

<p>由于想偷懒，所以一开始就想直接使用现有的第三方主题，安装的主题多了之后，发现一个很严重的问题。那就是当我对一些配置进行修改后，发现网页根本没有作出反应。最终我在网页审查元素时发现，我做的很多修改都被其它设置覆盖掉了。很多主题同时安装会导致出现越来越多的配置文件，最终配置混乱难以修改。但是我只是遇到字体啊，颜色啊一类小的问题，大的问题倒是没有遇到。</p>

<p>有了这个教训，我就将所有的内容重新部署之后，使用默认主题进行修改，这样的好处是，没有那么多杂七杂八的配置文件，找个什么东西也比较方便。</p>

<h4 id="section-1">2. 统一文章的样式</h4>

<p>之前发过两篇博文，第一篇很短，第二篇很长。直接发上去的结果就是列表页面太长，看起来很难受。所以就决定采用<code>read on</code>的方法，在文中加了<code>&lt;!-- more --&gt;</code>之后的确或多或少解决了这个问题。</p>

<p>但是不同的文章无法控制其样式统一，保持好的视觉效果。后来在<a href="http://beyondvincent.com/">破船之家</a>网站和<a href="http://www.uiweek.com/">UIWeek</a>杂志上得到了启发；最终决定将博客的<strong>Header</strong>设定成蓝色渐变，每一篇日志都以蓝色图片的形式出现在列表，更多的内容就放到博文内部。这样一来就能够保证样式统一，而且看起来比较简洁，换个专业点的话就是学习成本低（呵呵）。</p>

<h4 id="section-2">3. 隐藏侧边栏</h4>

<p>对于我这种有洁癖的人来说，大部分情况下侧边栏不存在比较好(难得看到一个侧边栏存在还好看简洁的网站)，所以打一开始就是要结束它的。要想做到这个效果，需要修改<code>_config.yml</code>文件：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line"># remove the sidebar
</span><span class="line">default_asides: []
</span><span class="line">sidebar: collapse</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>即将<code>default_asides</code>里面的东西全删掉，然后添加<code>sidebar: collapse</code>就可以了。</p>

<h4 id="section-3">4. 添加多说评论</h4>

<p>首先去<a href="http://duoshuo.com/">多说</a>注册帐号，然后多说会给你一段代码，如下：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="c">&lt;!-- Duoshuo Comment BEGIN --&gt;</span>
</span><span class="line"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;ds-thread&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class="line"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class="line">  <span class="kd">var</span> <span class="nx">duoshuoQuery</span> <span class="o">=</span> <span class="p">{</span><span class="nx">short_name</span><span class="o">:</span><span class="s2">&quot;yourname&quot;</span><span class="p">};</span>
</span><span class="line">  <span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class="line">        <span class="kd">var</span> <span class="nx">ds</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;script&#39;</span><span class="p">);</span>
</span><span class="line">	    <span class="nx">ds</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s1">&#39;text/javascript&#39;</span><span class="p">;</span><span class="nx">ds</span><span class="p">.</span><span class="nx">async</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span><span class="line">		<span class="nx">ds</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;http://static.duoshuo.com/embed.js&#39;</span><span class="p">;</span>
</span><span class="line">	    <span class="nx">ds</span><span class="p">.</span><span class="nx">charset</span> <span class="o">=</span> <span class="s1">&#39;UTF-8&#39;</span><span class="p">;</span>
</span><span class="line">	    <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;head&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span class="line">	     <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s1">&#39;body&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">ds</span><span class="p">);</span>
</span><span class="line">  <span class="p">})();</span>
</span><span class="line"><span class="nt">&lt;/script&gt;</span>
</span><span class="line"><span class="c">&lt;!-- Duoshuo Comment END --&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>你获得的代码跟这段唯一的区别就在于short_name不同。然后：</p>

<h6 id="a-configyml">a. 在<code>_config.yml</code>文件中添加：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"># duoshuo comments
</span><span class="line">duoshuo_comments: true
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="b-sourcelayoutsposthtml">b. 在<code>source/_layouts/post.html</code>中添加多说的模块：</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">
</span><span class="line">  <span class="nt">&lt;section&gt;</span>
</span><span class="line">		<span class="nt">&lt;h1&gt;</span>Comments<span class="nt">&lt;/h1&gt;</span>
</span><span class="line">		<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;comments&quot;</span> <span class="na">aria-live=</span><span class="s">&quot;polite&quot;</span><span class="nt">&gt;</span>Included file 'post/abc.html' not found in _includes directory<span class="nt">&lt;/div&gt;</span>
</span><span class="line">  <span class="nt">&lt;/section&gt;</span>
</span><span class="line">
</span><span class="line">
</span><span class="line"><span class="c">&lt;!-- 其中`abc.html`随便你起什么名字，个人建议为`duoshuo.html`. --&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="c-sourceincludespostduoshuohtmlok">c. 创建<code>source/_includes/post/duoshuo.html</code>，并把多说给你的代码放进去就OK了。</h6>

<h6 id="d-">d. 发布到博客上</h6>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">rake generate
</span><span class="line">git add .
</span><span class="line">git commit -m &#39;add duoshuo comment&#39;
</span><span class="line">git push origin source
</span><span class="line">rake deploy
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h6 id="e-">e. 打完收工</h6>

<h4 id="section-4">5. 修改样式</h4>
<p>对于样式的修改，需要学习CSS。以前虽然在<a href="http://www.codecademy.com/">Codecademy</a>上看过一点，但是从没有自己真正用过，所以也还算是初学。我对样式的修改大致就是将<strong>Header</strong>，<strong>Navigation</strong>以及<strong>Artical</strong>这些部分分开来，对不同的部分使用了一些特效。有些代码是在网上搜到后自己稍作了修改，有些是原创，有兴趣可以直接到我的GitHub网站上去看，不要告诉我找不到它在哪哦。</p>

<hr />

<h3 id="section-5">总结</h3>
<p>花了两天修改，发现其实干的事情并不很多。仔细想来大部分修改的时间都在调整不同的系数，以及在网上看材料。这两天学到的东西很多，也让我发现很多很好玩的东西，比如Web的框架，特效，还有很多很好很美的设计，大爱！</p>

<h4 id="section-6">参考</h4>
<ol>
  <li><a href="http://beyondvincent.com/">破船之家</a></li>
  <li><a href="http://www.uiweek.com/">UIWeek</a></li>
  <li><a href="http://octopress.org/">Octopress官网</a></li>
  <li><a href="http://shanewfx.github.io/blog/2012/08/13/improve-blog-theme/">Octopress主题改造</a></li>
  <li><a href="http://www.jcodecraeer.com/a/cssjiqiaoyuguifan/2012/0628/289.html">css实现简约的纸张卷角效果</a></li>
  <li><a href="http://www.cnblogs.com/oec2003/archive/2013/05/31/3109577.html">Octopress博客设置</a></li>
  <li><a href="https://www.google.com.hk/search?q=Octopress%E4%B8%BB%E9%A2%98%E6%94%B9%E9%80%A0&amp;oq=Octopress%E4%B8%BB%E9%A2%98%E6%94%B9%E9%80%A0&amp;aqs=chrome..69i57&amp;sourceid=chrome&amp;espv=210&amp;es_sm=119&amp;ie=UTF-8">。。。</a></li>
</ol>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[记录：Octopress建站之旅]]></title>
    <link href="http://jackycode.github.io/blog/2014/02/23/record/"/>
    <updated>2014-02-23T10:40:38+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/02/23/record</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical2.jpg" alt="aritical 2" /></p>

<!-- more -->

<p><em>“文章原创，转载请注明出处”</em></p>

<hr />

<p>博客建立好了，花了不少时间，今天就想将自己如何建立这个博客的过程梳理一遍，写在这里，当作复习回顾的同时，也与人参考。</p>

<p>自己的这个小博客是用的Octopress搭建的，托管在github上面(没有资金但又想建立一个自己独立博客的同志们可以使用GitHub，free哦)。</p>

<p>使用Octopress唯一的问题在于你得学一点shell commands和Git基础(其实用的内容并不很多，照着顺序搭建部署都可以搞定）。以后发博客只需要一些<strong>简单的</strong><em>每次都一样的</em>步骤就可以搞定了，直接复制粘贴就好。但是我想你需要对这些命令不感到反感才行，正如Octopress官方文档开头说的：</p>

<blockquote>
  <p>You should be comfortable running shell commands and familiar with the basics of Git. If that sounds daunting, Octopress probably isn’t for you.</p>
</blockquote>

<p>但是shell跟Git是很好的东东，shell可以帮你很大限度地减少重复工作，而且学习shell的过程会让你对计算机有更深入的了解；Git是一个开源的分布式版本控制系统，它让我一次性放弃了CVS而投入它的怀抱（变得是不是太快了）。GitHub就是为开源项目免费提供Git存储的网站，看看现在无数的开源项目在GitHub里面活跃，你就知道不是我变得太快，而是它的优秀让你无法抗拒。</p>

<hr />

<h3 id="section">一、准备工作</h3>
<p>在安装Octopress之前，你必须得先安装上Git和Ruby。安装很简单，直接百度就可以了。如果你用的是Mac，那么恭喜你，你的电脑里面已经自带了Ruby。当然你仍然可以选择用rvm或者rbenv去安装更新Ruby，这些命令在官网上都有，就不多说了。</p>

<p>安装完成后，在终端中运行命令：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git --version
</span><span class="line">ruby --version</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>如果能正确显示版本号，类似于我的输出：分别是<code>git version 1.8.3.4 (Apple Git-47)</code>和<code>ruby 2.0.0p247 (2013-06-27 revision 41674) [universal.x86_64-darwin13]</code>，就没有问题了，继续往下吧！</p>

<h3 id="octopress">二、安装Octopress</h3>
<p>首先在终端进入你想安装Octopress的文件夹中，然后使用git命令将Octopress clone到本地：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git clone git://github.com/imathis/octopress.git octopress</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>进入octopress文件夹：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">cd octopress</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>安装依赖项:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line">gem install bundler
</span><span class="line">rbenv rehash    # If you use rbenv, rehash to be able to run the bundle command
</span><span class="line">bundle install</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>当然你有可能跟我一样遇到权限不足，操作无法完成的情况，那么你需要在命令前面加上<code>sudo</code>，第一次终端会要求你输入密码，输入成功后就可以正常安装了。</p>

<p>安装好依赖项后，你需要安装主题：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">rake install</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>上面命令会安装默认主题，当然你可以选择安装第三方主题，在<a href="https://github.com/imathis/octopress/wiki/3rd-Party-Octopress-Themes">这里</a>有很多第三方的主题，你可以挑选自己喜欢的主题，然后安装：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git clone GIT_URL .themes/THEME_NAME
</span><span class="line">rake install['THEME_NAME']</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>比如我的用的是CleanPress主题：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git clone git://github.com/macjasp/cleanpress.git .themes/cleanpress
</span><span class="line">rake install['cleanpress']</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="github">三、注册GitHub</h3>
<p>到<a href="https://github.com/">GitHub</a>网站上注册一个免费账户，然后新建一个repository。<strong>repository一定要使用这样的格式命名：<code>yourname.github.io</code>，其中<code>yourname</code>是你注册时的用户名。</strong></p>

<h3 id="github-1">四、部署到GitHub</h3>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class=""><span class="line">rake setup_github_pages</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>输入上述的命令会要求你输入SSH(你注册GitHub时会有)或者是你的repository的url，找到复制粘贴就好。</p>

<p>然后就可以开始部署了：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class=""><span class="line">rake generate
</span><span class="line">rake deploy</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>此时可能会让你登录你的github，按照提示进行输入即可。</p>

<p>到此为止，就差博客的source还没有提交了：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class=""><span class="line">git add .
</span><span class="line">git commit -m 'your message'
</span><span class="line">git push origin source</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="octopress-1">五、配置Octopress</h3>
<p>我对Octopress没有做很大的配置改动，只是设置了博客名称，以及添加了Home页及其它一些页面的内容(其实就是给了一个空网页，里面神马都没有，以后再慢慢填充吧)。</p>

<p>在octopress文件夹中，需要在<code>_config.yml</code>中设置自己博客的名称等等的内容：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class=""><span class="line">url: [url of your github]
</span><span class="line">title: [title of your blog]
</span><span class="line">subtitle: [subtitle of your blog]
</span><span class="line">author: [your name]
</span><span class="line">simple_search: http://google.com/search
</span><span class="line">description: [some other information you want to add]</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>除此之外，我还将里面有关twitter、facebook等等的社交信息全部给删除掉了(谢谢<a href="http://beyondvincent.com/">船哥</a>，这个明显的是偷师啊～)。当然你要是有这些帐号也可以设置，只是在国内用处不大呀。</p>

<p>之后，我对<code>octopress/source/_includes/custom</code>下的<code>navigation.html</code>进行了简单的修改，就是添加了<code>Home</code>，以及变换了<code>About</code>的位置：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="html"><span class="line"><span class="nt">&lt;ul&gt;</span>
</span><span class="line">	<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/home&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="line">	<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/&quot;</span><span class="nt">&gt;</span>Blog<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="line">	<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/portfolio&quot;</span><span class="nt">&gt;</span>Portfolio<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="line">	<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/archives&quot;</span><span class="nt">&gt;</span>Archive<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="line">	<span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/about&quot;</span><span class="nt">&gt;</span>About<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
</span><span class="line"><span class="nt">&lt;/ul&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>现在添加了Home页，但是Home页其实还是不存在的，所有需要建立一个新的page：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">rake new_page[home]
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>上述命令会在<code>octopress/source</code>文件夹下生成一个新的文件夹<code>home</code>，<code>home</code>文件夹下面有一个markdown文件<code>index.markdown</code>。编辑该文件，将你想放在Home页上的东西写进去就OK了。</p>

<p>默认情况下，<code>About</code>,<code>porfolio</code>页面都是不存在的，所以需要自己设置，方法与设置<code>home</code>页面的一样，就不多说了。</p>

<p>根据自己的需求，修改完成后，不要忘了：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">rake generate
</span><span class="line">git add .
</span><span class="line">git commit -m &#39;customise octopress&#39;
</span><span class="line">git push origin source
</span><span class="line">rake deploy
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="section-1">六、发布新博客</h3>
<p>根据Jekyll的命名规则，文章命名必须有这样的格式：<code>YYYY-MM-DD-post-title.markdown</code>，使用Octopress的rake task可以简单解决这个问题：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">rake new_post[&quot;title&quot;]
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>命令会生成这样的文件：<code>source/_posts/YYYY-MM-DD-title.markdown</code>，然后你可以修改markdown文件，写自己的博文。写好后，别忘记部署到GitHub：</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="html"><span class="line">rake generate
</span><span class="line">git add .
</span><span class="line">git commit -am &#39;YYYY-MM_DD post&#39;
</span><span class="line">git push origin source
</span><span class="line">rake deploy
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>至此文章就部署好了，过两分钟去自己的博客看看吧。</p>

<h3 id="section-2">七、最后</h3>
<p>利用Octopress搭建一个GitHub博客的简单流程差不多就像上述。但是对于自己的博客，可能我们还需要做更多的一些配置，比如添加评论系统，社交分享啊等等。这些内容网上有很多，可以到Google里面百度一下～</p>

<hr />

<h4 id="octopress-2">参考资源以及更多配置Octopress的资源推荐</h4>
<ol>
  <li><a href="http://octopress.org/docs/setup/">Octopress官方文档</a></li>
  <li><a href="http://beyondvincent.com/">破船之家</a>：<a href="http://beyondvincent.com/blog/2013/08/03/108-creating-a-github-blog-using-octopress/">利用Octopress搭建一个Github博客</a></li>
  <li><a href="http://never.doubting.me/">Never Doubting Me</a>：<a href="http://never.doubting.me/2013/04/18/2013-04-18-setup-octopress-on-github-step-by-step/">教程:一步步在github上建立octopress博客</a></li>
  <li><a href="http://williamherry.com/">William’s Blog with Octopress</a>：<a href="http://williamherry.com/blog/2012/07/20/octopress-setup/">Octopress - 像黑客一样写博客</a></li>
  <li><a href="http://www.yanjiuyanjiu.com/">研究研究</a>：<a href="http://www.yanjiuyanjiu.com/blog/20130402/">我的Octopress配置</a></li>
  <li><a href="http://agiledon.github.io/">简单文本</a>：<a href="http://agiledon.github.io/blog/2012/12/25/octopress-issues-solution-and-tips/">Octopress博客问题解决方案与技巧</a></li>
  <li><a href="https://www.google.com.hk/search?newwindow=1&amp;safe=strict&amp;espv=210&amp;es_sm=119&amp;q=octopress%E6%95%99%E7%A8%8B&amp;oq=octopress%E6%95%99%E7%A8%8B&amp;gs_l=serp.12..35i39.5308.6241.0.8806.10.8.0.0.0.1.237.921.0j3j2.5.0....0...1c.1j4.35.serp..6.4.789.PMKW2jRRdPI">。。。</a></li>
</ol>

<p><strong>如果有什么问题或者建议，可以直接回复我或者给我发邮件：<code>jackycodemsc@gmail.com</code>。</strong></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Hello, my blog]]></title>
    <link href="http://jackycode.github.io/blog/2014/02/21/hello/"/>
    <updated>2014-02-21T14:17:35+08:00</updated>
    <id>http://jackycode.github.io/blog/2014/02/21/hello</id>
    <content type="html"><![CDATA[<p><img src="http://jackycode.github.io/images/artical/artical1.jpg" alt="aritical 1" /></p>

<!-- more -->

<p>花了一个晚上以及一个上午的时间，总算是把这个博客弄出来了(对一个数学系的孩子不容易啊！)。这里要非常感谢<a href="http://beyondvincent.com/">破船之家</a>，<a href="http://williamherry.com/">William’s Blog with Octopress</a>以及<a href="http://octopress.org/">Octopress</a>的官方文档和一些其它网站上的材料(翻了不少材料，没记住那么多，sorry！)。我大致是照着做了两遍，其中大错了一次(对Git掌握有待加强啊)，小错蛮多次(对Web这些语言实在是不甚了了，需要好好摸索学习)，一路错下来倒也是把这个小站弄出来了。非常感谢Github，不然我一个穷学生还真没钱去买个域名建博客，非常感谢Octopress，不然我也没本事弄出个博客系统来～哈哈！</p>
]]></content>
  </entry>
  
</feed>
